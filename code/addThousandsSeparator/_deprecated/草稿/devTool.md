# Chrome DevTools é¢æ¿å…¨æ”»ç•¥<!-- omit in toc -->

- [console](#console)
  - [å ä½ç¬¦](#å ä½ç¬¦)
  - [console.time(), timeEnd()](#consoletime-timeend)
  - [console.count()](#consolecount)
  - [console.table()](#consoletable)
  - [console.dir()](#consoledir)
- [$ é€‰æ‹©å™¨](#-é€‰æ‹©å™¨)
  - [$\_](#_)
  - [$0,$1...$4](#014)
  - [$,?](#)
  - [$x](#x)
  - [keys(), values()](#keys-values)
- [Element é¢æ¿](#element-é¢æ¿)
- [NetWork é¢æ¿](#network-é¢æ¿)
  - [`Requests Table` åŒºåŸŸ](#requests-table-åŒºåŸŸ)
  - [é‡æ–°å‘èµ· xhr è¯·æ±‚](#é‡æ–°å‘èµ·-xhr-è¯·æ±‚)
  - [Size å’Œ Time](#size-å’Œ-time)
  - [Summary](#summary)
  - [æ’é˜Ÿæˆ–åœæ­¢é˜»å¡](#æ’é˜Ÿæˆ–åœæ­¢é˜»å¡)
  - [TTFB](#ttfb)
  - [Content Download](#content-download)
- [Source é¢æ¿](#source-é¢æ¿)
- [Performance é¢æ¿](#performance-é¢æ¿)
  - [å¼€å§‹è®°å½•](#å¼€å§‹è®°å½•)
  - [controls æ§åˆ¶æ¡åŒºåŸŸ](#controls-æ§åˆ¶æ¡åŒºåŸŸ)
  - [FPS](#fps)
  - [CPU](#cpu)
  - [performance API](#performance-api)
    - [memory](#memory)
    - [navigation](#navigation)
      - [redirectCount: 0](#redirectcount-0)
      - [type: 0](#type-0)
  - [timeOrigin](#timeorigin)
  - [timing](#timing)
    - [navigationStart: 'æ—¶é—´æˆ³'](#navigationstart-æ—¶é—´æˆ³)
    - [unloadEventStart: 0](#unloadeventstart-0)
    - [unloadEventEnd: 0](#unloadeventend-0)
    - [redirectStart: 0](#redirectstart-0)
    - [redirectEnd: 0](#redirectend-0)
    - [fetchStart: 'æ—¶é—´æˆ³'](#fetchstart-æ—¶é—´æˆ³)
    - [domainLookupStart: 'æ—¶é—´æˆ³'](#domainlookupstart-æ—¶é—´æˆ³)
    - [domainLookupEnd: 'æ—¶é—´æˆ³'](#domainlookupend-æ—¶é—´æˆ³)
    - [connectStart: 'æ—¶é—´æˆ³'](#connectstart-æ—¶é—´æˆ³)
    - [connectEnd: 'æ—¶é—´æˆ³'](#connectend-æ—¶é—´æˆ³)
    - [secureConnectionStart: 0](#secureconnectionstart-0)
    - [requestStart: 'æ—¶é—´æˆ³'](#requeststart-æ—¶é—´æˆ³)
    - [responseStart: 'æ—¶é—´æˆ³'](#responsestart-æ—¶é—´æˆ³)
    - [responseEnd: 0](#responseend-0)
    - [domLoading: 0](#domloading-0)
    - [dominteractive: 0](#dominteractive-0)
    - [domContentLoadedEventStart: 0](#domcontentloadedeventstart-0)
    - [domContentLoadedEventEnd: 0](#domcontentloadedeventend-0)
    - [domComplete: 0](#domcomplete-0)
    - [loadEventStart: 0](#loadeventstart-0)
    - [loadEventEnd: 0](#loadeventend-0)
  - [performance.now() æ–¹æ³•](#performancenow-æ–¹æ³•)
  - [timing å†…åŒ…å«äº†å‡ ä¹æ‰€æœ‰æ—¶åºçš„æ—¶é—´èŠ‚ç‚¹](#timing-å†…åŒ…å«äº†å‡ ä¹æ‰€æœ‰æ—¶åºçš„æ—¶é—´èŠ‚ç‚¹)
  - [performance.getEntries()](#performancegetentries)
- [æˆªå›¾](#æˆªå›¾)
- [Lighthouse(Audits) é¢æ¿](#lighthouseaudits-é¢æ¿)
- [Security é¢æ¿](#security-é¢æ¿)

## console

### å ä½ç¬¦

```js
// å ä½ç¬¦
// å¸¦æœ‰å ä½ç¬¦çš„å‚æ•°ä¹‹åçš„è‹¥å¹²å‚æ•°, å±äºå ä½ç¬¦çš„é…ç½®å‚æ•°
// %s
console.log('%s', 'hello')
// %c
console.log('%s%c world', 'hello', 'color: red')
```

![](../Images/log.png)

å…¶ä½™çš„å ä½ç¬¦åˆ—è¡¨è¿˜æœ‰ï¼š

| å ä½ç¬¦ |      åŠŸèƒ½      |
| :----: | :------------: |
|   %s   |     å­—ç¬¦ä¸²     |
|   %d   |      æ•´æ•°      |
|   %i   |      æ•´æ•°      |
|   %f   |     æµ®ç‚¹æ•°     |
|   %o   |   å¯¹è±¡çš„é“¾æ¥   |
|   %c   | css æ ¼å¼å­—ç¬¦ä¸² |

### console.time(), timeEnd()

`time` å’Œ `timeEnd` ä¸€èˆ¬æ”¾åœ¨ä¸€èµ·ç”¨ï¼Œä¼ å…¥ä¸€ä¸ªå‚æ•°ç”¨æ¥æ ‡è¯†èµ·å§‹ä½ç½®ç”¨äºç»Ÿè®¡æ—¶é—´:

```js
console.time('âŒšï¸ï¼š')
Array(900000)
  .fill({})
  .map((v, i) => (v.i = i))
console.timeEnd('âŒšï¸ï¼š')

// âŒšï¸ï¼š: 38.751953125 ms
```

ä¼šæ‰“å°å‡ºä¸­é—´ä»£ç çš„æ‰§è¡Œæ—¶é—´

### console.count()

è®¡æ•°, å¯ä»¥ç”¨æ¥ç»Ÿè®¡æŸä¸ªå‡½æ•°çš„æ‰§è¡Œæ¬¡æ•°ï¼Œä¹Ÿå¯ä»¥ä¼ å…¥ä¸€ä¸ªå‚æ•°ï¼Œå¹¶ä¸”æ ¹æ®ä¼ å…¥çš„å‚æ•°åˆ†ç»„ç»Ÿè®¡è°ƒç”¨çš„æ¬¡æ•°

```js
function foo(type = '') {
  type ? console.count(type) : console.count()
  return 'typeï¼š' + type
}

foo('A') //A: 1
foo('B') //B: 1
foo() //default: 1
foo() //default: 2
foo() //default: 3
foo('A') //A: 2
```

### console.table()

`console.table()` æ–¹æ³•å¯ä»¥å°†å¤åˆç±»å‹çš„æ•°æ®è½¬ä¸ºè¡¨æ ¼æ˜¾ç¤º

```js
var arr = [
  { name: 'æ¢…è¥¿', qq: 10 },
  { name: 'C ç½—', qq: 7 },
  { name: 'å†…é©¬å°”', qq: 11 }
]
console.table(arr)
```

![](../Images/consloe_table.png)

### console.dir()

å¯é€‰çš„ç¬¬äºŒä¸ªå‚æ•°æŒ‡å®šçš„é€‰é¡¹ `util.inspect()`

- **showHidden** å¦‚æœä¸º `true`ï¼Œåˆ™è¿˜å°†æ˜¾ç¤ºå¯¹è±¡çš„ä¸å¯æšä¸¾çš„å±æ€§ï¼Œé»˜è®¤ä¸º `false`ã€‚

- **depth** å‘Šè¯‰æ£€æŸ¥æ ¼å¼åŒ–å¯¹è±¡æ—¶è¦é€’å½’å¤šå°‘æ¬¡ã€‚è¿™å¯¹äºæ£€æŸ¥å¤§å‹å¤æ‚å¯¹è±¡å¾ˆæœ‰ç”¨ã€‚é»˜è®¤ä¸º `2`ã€‚è¦ä½¿å…¶æ— é™æœŸé€’å½’ï¼Œè¯·ä¼ é€’ `null`ã€‚

- **colors** å¦‚æœä¸º `true`ï¼Œåˆ™å°†ä½¿ç”¨ `ANSI` é¢œè‰²ä»£ç è®¾ç½®è¾“å‡ºæ ·å¼ã€‚é»˜è®¤ä¸º `false`ã€‚
- `customInspect` å¦‚æœä¸º `false`ï¼Œåˆ™ `inspect()` ä¸ä¼šè°ƒç”¨åœ¨è¢«æ£€æŸ¥å¯¹è±¡ä¸Šå®šä¹‰çš„è‡ªå®šä¹‰å‡½æ•°ã€‚é»˜è®¤ä¸º `true`ã€‚

![](../Images/console_dir.png)

## $ é€‰æ‹©å™¨

### $\_

å¯ä»¥è®°å½•ä¸Šæ¬¡è®¡ç®—çš„ç»“æœï¼Œç›´æ¥ç”¨äºä»£ç æ‰§è¡Œ:

![](../Images/devtool_$.gif)

### $0,$1...$4

ä»£è¡¨æœ€è¿‘ `5` ä¸ªå®¡æŸ¥å…ƒç´ é€‰ä¸­è¿‡çš„ `DOM` èŠ‚ç‚¹

### $,?

- `$(selector)` æ˜¯åŸç”Ÿ `document.querySelector()` çš„å°è£…ã€‚
- `?(selector)` è¿”å›çš„æ˜¯æ‰€æœ‰æ»¡è¶³é€‰æ‹©æ¡ä»¶çš„å…ƒç´ çš„ä¸€ä¸ªé›†åˆï¼Œæ˜¯ `document.querySelectorAll()` çš„å°è£…

### $x

å°†æ‰€åŒ¹é…çš„èŠ‚ç‚¹æ”¾åœ¨ä¸€ä¸ªæ•°ç»„é‡Œè¿”å›

```jsx
<ul>
  <ul>
    <li><p>li ä¸‹çš„ p1</p></li>
    <li><p>li ä¸‹çš„ p2</p></li>
    <li><p>li ä¸‹çš„ p3</p></li>
  </ul>
</ul>
<p>å¤–é¢çš„ p</p>

$x('//li') // æ‰€æœ‰çš„ li
$x('//p') // æ‰€æœ‰çš„ p
$x('//li//p') // æ‰€æœ‰çš„ li ä¸‹çš„ p
$x('//li[p]') // æ‰€æœ‰çš„ li ä¸‹çš„ p
```

### keys(), values()

è·Ÿ `ES6` å¯¹è±¡æ‰©å±•æ–¹æ³•ï¼Œ `Object.keys()` å’Œ `Object.values()` ç›¸åŒ

## Element é¢æ¿

- `computed` ç‚¹å‡»æŸä¸ªæ ·å¼å¯ä»¥ç›´æ¥è·³è½¬è‡³å¯¹åº” `css` å®šä¹‰

- è°ƒæ•´æŸä¸ªå…ƒç´ çš„æ•°å€¼ï¼Œé€‰ä¸­æƒ³è¦æ›´æ”¹çš„å€¼ï¼ŒæŒ‰æ–¹å‘é”®ä¸Šä¸‹å°±å¯ä»¥ `+ - 1` ä¸ªå•ä½çš„å€¼

  - `opt + æ–¹å‘é”®` å¯ä»¥ `Ã—10` è°ƒæ•´å•ä½å€¼
  - `cmd + æ–¹å‘é”®` å¯ä»¥ `Ã—100` è°ƒæ•´å•ä½å€¼
  - `shift + æ–¹å‘é”®` å¯ä»¥ `/10` è°ƒæ•´å•ä½

- é€‰ä¸­èŠ‚ç‚¹ï¼Œç›´æ¥æŒ‰é”®ç›˜ `H` å¯ä»¥ç›´æ¥è®©å…ƒç´ æ˜¾ç¤º / éšè—ï¼Œä¸ç”¨æ‰‹åŠ¨æ•²æ ·å¼äº†ï¼Œæ•ˆæœç­‰åŒ `visibility: hidden`ï¼Œè¿˜æ˜¯è¦å æ®ç›’æ¨¡å‹ç©ºé—´çš„ã€‚

- å°†æŸä¸ªå…ƒç´ å­˜å‚¨åˆ°å…¨å±€ä¸´æ—¶å˜é‡ä¸­ï¼Œé€‰ä¸­èŠ‚ç‚¹ï¼Œå³é”®ï¼Œ`Store as global variable`ï¼ˆåœ¨ network é¢æ¿ä¸­ä¹Ÿèƒ½ç”¨ï¼Œå°¤å…¶æ˜¯ç­›é€‰æ¥å£çš„è¿”å›å€¼å¾ˆæ–¹ä¾¿ï¼‰

![](../Images/devtool_store.png)

- å¦‚æœé¡µé¢å¾ˆé•¿ï¼Œæƒ³æ‰¾ä¸€ä¸ªæ–‡æœ¬èŠ‚ç‚¹çš„æ˜¾ç¤ºä½ç½®åˆä¸æƒ³æ‰‹åŠ¨æ»‘åŠ¨å¯ä»¥è¯•è¯• `Scroll into view`

![](../Images/devTool_scroll.gif)

## NetWork é¢æ¿

![](../Images/devtool_net.webp)

- `Controls` - æ§åˆ¶ `Network` åŠŸèƒ½é€‰é¡¹ï¼Œä»¥åŠä¸€äº›å±•ç¤ºå¤–è§‚

- `Filters` - æ§åˆ¶åœ¨ `Requests Table` ä¸­æ˜¾ç¤ºå“ªäº›ç±»å‹çš„èµ„æº

> `tips`ï¼šæŒ‰ä½ `Cmd` (Mac) æˆ– `Ctrl` (Windows/Linux) å¹¶ç‚¹å‡»ç­›é€‰é¡¹å¯ä»¥åŒæ—¶é€‰æ‹©å¤šä¸ªç­›é€‰é¡¹

- `Overview` - æ­¤å›¾è¡¨æ˜¾ç¤ºäº†èµ„æºæ£€ç´¢æ—¶é—´çš„æ—¶é—´çº¿ã€‚å¦‚æœçœ‹åˆ°å¤šæ¡ç«–çº¿å †å åœ¨ä¸€èµ·ï¼Œåˆ™è¯´æ˜è¿™äº›èµ„æºè¢«åŒæ—¶æ£€ç´¢

- `Requests Table` - æ­¤è¡¨æ ¼åˆ—å‡ºäº†æ£€ç´¢çš„æ¯ä¸€ä¸ªèµ„æºã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼Œæ­¤è¡¨æ ¼æŒ‰æ—¶é—´é¡ºåºæ’åºï¼Œæœ€æ—©çš„èµ„æºåœ¨é¡¶éƒ¨ã€‚ç‚¹å‡»èµ„æºçš„åç§°å¯ä»¥æ˜¾ç¤ºæ›´å¤šä¿¡æ¯ã€‚ æç¤ºï¼šå³é”®ç‚¹å‡» `Timeline` ä»¥å¤–çš„ä»»ä½•ä¸€ä¸ªè¡¨æ ¼æ ‡é¢˜å¯ä»¥æ·»åŠ æˆ–ç§»é™¤ä¿¡æ¯åˆ—

### `Requests Table` åŒºåŸŸ

æ ‡é¢˜æ çš„å¯¹åº”æè¿°ï¼š

- Name(åç§°): èµ„æºçš„åç§°ã€‚
- Status(çŠ¶æ€): `HTTP` çŠ¶æ€ä»£ç ã€‚
- Type(ç±»å‹): è¯·æ±‚çš„èµ„æºçš„ `MIME` ç±»å‹ã€‚
- Initiator(å‘èµ·): å‘èµ·è¯·æ±‚çš„å¯¹è±¡æˆ–è¿›ç¨‹ã€‚å®ƒå¯èƒ½æœ‰ä»¥ä¸‹å‡ ç§å€¼ï¼š
  - Parser(è§£æå™¨): `Chrome` çš„ `HTML` è§£æå™¨å‘èµ·äº†è¯·æ±‚ã€‚
  - Redirect(é‡å®šå‘): `HTTP` é‡å®šå‘å¯åŠ¨äº†è¯·æ±‚ã€‚
  - Script(è„šæœ¬): è„šæœ¬å¯åŠ¨äº†è¯·æ±‚ã€‚
  - Other(å…¶ä»–): ä¸€äº›å…¶ä»–è¿›ç¨‹æˆ–åŠ¨ä½œå‘èµ·è¯·æ±‚ï¼Œä¾‹å¦‚ç”¨æˆ·ç‚¹å‡»é“¾æ¥è·³è½¬åˆ°é¡µé¢ï¼Œæˆ–åœ¨åœ°å€æ ä¸­è¾“å…¥ç½‘å€ã€‚
- Size(å¤§å°): å“åº”å¤´çš„å¤§å°ï¼ˆé€šå¸¸æ˜¯å‡ ç™¾å­—èŠ‚ï¼‰åŠ ä¸Šå“åº”æ•°æ®ï¼Œç”±æœåŠ¡å™¨æä¾›ã€‚
- Time(æ—¶é—´): æ€»æŒç»­æ—¶é—´ï¼Œä»è¯·æ±‚çš„å¼€å§‹åˆ°æ¥æ”¶å“åº”ä¸­çš„æœ€åä¸€ä¸ªå­—èŠ‚
- Timeline/Waterfall(æ—¶é—´è½´): æ˜¾ç¤ºæ‰€æœ‰ç½‘ç»œè¯·æ±‚çš„å¯è§†åŒ–ç»Ÿè®¡ä¿¡æ¯

### é‡æ–°å‘èµ· xhr è¯·æ±‚

åœ¨å¹³æ—¶å’Œåç«¯è”è°ƒæ—¶ï¼Œæˆ‘ä»¬ç”¨çš„æœ€å¤šçš„å¯èƒ½å°±æ˜¯ `Network` é¢æ¿äº†ã€‚ä½†æ˜¯æ¯æ¬¡æƒ³é‡æ–°æŸ¥çœ‹ä¸€ä¸ªè¯·æ±‚é€šè¿‡åˆ·æ–°é¡µé¢ã€ç‚¹å‡»æŒ‰é’®ç­‰æ–¹å¼å»è§¦å‘ `xhr` è¯·æ±‚ï¼Œè¿™ç§æ–¹å¼æœ‰æ—¶æ˜¾å¾—ä¼šæ¯”è¾ƒéº»çƒ¦ï¼Œå¯ä»¥é€šè¿‡ `Replay XHR` çš„æ–¹å¼å»å‘èµ·ä¸€æ¡æ–°çš„è¯·æ±‚ï¼š

![](../Images/replay_xhr.gif)

### Size å’Œ Time

![](../Images/devtool_size.webp)

`Size` æœ‰ä¸¤è¡Œï¼š

- ç¬¬ä¸€è¡Œè¡¨ç¤ºçš„æ˜¯æ•°æ®çš„ä¼ è¾“æ—¶çš„å¤§å°ï¼Œä¾‹å¦‚ä¸Šå›¾ä¸­çš„ `190KB`
- ç¬¬äºŒè¡Œè¡¨ç¤ºçš„æ˜¯æ•°æ®å®é™…çš„å¤§å° `708KB`

åœ¨æœåŠ¡å™¨ç«¯é‡‡å– `gzip` å‹ç¼©ç®—æ³•å°†åŸæœ‰ `708KB` å‹ç¼©è‡³ `190KB`, ä¼ è¾“å¤§å°ç¼©çŸ­ `3.7` å€ï¼Œå¤§å¤§çš„æé«˜äº†èµ„æºä¼ è¾“çš„æ•ˆç‡

> éœ€è¦æ³¨æ„çš„ç‚¹ï¼š
> `gzip` å‹ç¼©åªä¼šå‹ç¼©å“åº”ä½“å†…å®¹ï¼Œæ‰€ä»¥é€‚ç”¨äºè¿”å›æ•°æ®é‡å¤§çš„æ—¶å€™ï¼Œå¦‚æœæ•°æ®é‡å¤ªå°çš„è¯ï¼Œæœ‰å¯èƒ½ä¼šå¯¼è‡´æ•°æ®ä¼ è¾“æ—¶çš„å¤§å°æ¯”å®é™…å¤§å°è¦å¤§ (åŠ å…¥äº†ä¸€äº›é¢å¤–çš„å“åº”å¤´)

`Time` æœ‰ä¸¤è¡Œï¼š

- ç¬¬ä¸€è¡Œè¡¨ç¤ºä»å®¢æˆ·ç«¯å‘é€è¯·æ±‚åˆ°æœåŠ¡ç«¯è¿”å›æ‰€æœ‰æ•°æ®æ‰€èŠ±è´¹çš„æ€»æ—¶é—´ï¼Œå¯¹äºä¸Šå›¾æ¥è¯´å°±æ˜¯ `471ms`
- ç¬¬äºŒè¡Œè¡¨ç¤ºçš„æ˜¯ä»å®¢æˆ·ç«¯å‘é€è¯·æ±‚åˆ°æœåŠ¡å™¨ç«¯è¿”å›ç¬¬ä¸€ä¸ªå­—èŠ‚æ‰€è¡¨ç¤ºçš„æ—¶é—´ï¼Œå¯¹äºä¸Šå›¾æ¥è¯´å°±æ˜¯ `55ms`

> ç¬¬ä¸€è¡Œçš„æ—¶é—´ä»£è¡¨äº†æ‰€æœ‰é¡¹ç›®ï¼šä¾‹å¦‚è§£æ `dns`ï¼Œå»ºç«‹è¿æ¥ï¼Œç­‰å¾…æœåŠ¡å™¨è¿”å›æ•°æ®ï¼Œä¼ è¾“æ•°æ®ç­‰
>
> ç¬¬äºŒè¡Œçš„æ—¶é—´æ˜¯ **æ€»æ—¶é—´ - æ•°æ®ä¼ è¾“çš„æ—¶é—´**

ä»ä¸Šé¢çš„åˆ†æä¸­æˆ‘ä»¬çœ‹åˆ° ä»å®¢æˆ·ç«¯è¯·æ±‚åˆ°æœåŠ¡å™¨å¤„ç†ç»“æŸå‡†å¤‡è¿”å›æ•°æ®èŠ±äº† `55ms`ï¼Œä½†æ˜¯åœ¨è¿›è¡Œä¼ è¾“æ•°æ®çš„æ—¶å€™èŠ±è´¹äº† `471ms`

å¯¹äºç½‘æ…¢çš„ç”¨æˆ·æ¥è¯´ï¼Œå¯èƒ½ä¼šè€—è´¹æ›´é•¿çš„æ—¶é—´ï¼Œæ‰€ä»¥åœ¨å†™ä»£ç ï¼ˆæ¥å£ï¼‰çš„æ—¶å€™ï¼Œè¿”å›çš„æ•°æ®é‡è¦å°½é‡ç²¾ç®€

### Summary

![](../Images/devtool_sum.webp)

`DOMContentLoaded` ä¼šæ¯” `Load` æ—¶é—´å°ï¼Œä¸¤è€…æ—¶é—´å·®å¤§è‡´ç­‰äºå¤–éƒ¨èµ„æºåŠ è½½ï¼ˆä¸€èˆ¬æ˜¯å›¾ç‰‡ / å­—ä½“ï¼‰çš„æ—¶é—´

`Finish`Â  æ—¶é—´æ˜¯é¡µé¢ä¸Šæ‰€æœ‰ `http` è¯·æ±‚å‘é€åˆ°å“åº”å®Œæˆçš„æ—¶é—´ï¼ˆå¦‚æœé¡µé¢å­˜åœ¨ä¸€ä¸ªè½®è¯¢çš„æ¥å£ï¼Œè¿™ä¸ªå€¼ä¹Ÿä¼šç´¯åŠ çš„ï¼‰ã€‚`HTTP1.0/1.1` åè®®é™å®šå•ä¸ªåŸŸåçš„è¯·æ±‚å¹¶å‘é‡æ˜¯ `6` ä¸ªï¼Œå³ `Finish` æ˜¯æ‰€æœ‰è¯·æ±‚ï¼ˆä¸åªæ˜¯ `XHR` è¯·æ±‚ï¼Œè¿˜åŒ…æ‹¬ `DOC`ï¼Œ`img`ï¼Œ`js`ï¼Œ`css` ç­‰èµ„æºçš„è¯·æ±‚ï¼‰åœ¨å¹¶å‘é‡ä¸º `6` çš„é™åˆ¶ä¸‹å®Œæˆçš„æ—¶é—´ã€‚

- `Finish`Â  çš„æ—¶é—´æ¯” Â `Load`Â  å¤§ï¼Œæ„å‘³ç€é¡µé¢æœ‰ç›¸å½“éƒ¨åˆ†çš„è¯·æ±‚é‡
- `Finish`Â  çš„æ—¶é—´æ¯” Â `Load`Â  å°ï¼Œæ„å‘³ç€é¡µé¢è¯·æ±‚é‡å¾ˆå°‘ï¼Œå¦‚æœé¡µé¢æ˜¯åªæœ‰ä¸€ä¸ª `html` æ–‡æ¡£è¯·æ±‚çš„é™æ€é¡µé¢ï¼Œ`Finish` æ—¶é—´åŸºæœ¬å°±ç­‰äº `HTML` æ–‡æ¡£è¯·æ±‚çš„æ—¶é—´

### æ’é˜Ÿæˆ–åœæ­¢é˜»å¡

æœ€å¸¸è§çš„é—®é¢˜æ˜¯å¾ˆå¤šä¸ªè¯·æ±‚æ’é˜Ÿæˆ–è¢«é˜»å¡ã€‚è¿™è¡¨ç¤ºä»å•ä¸ªå®¢æˆ·ç«¯æ£€ç´¢çš„èµ„æºå¤ªå¤šã€‚åœ¨ `HTTP 1.0/1.1` è¿æ¥åè®®ä¸­ï¼Œ`Chrome` é™åˆ¶æ¯ä¸ªåŸŸåæœ€å¤šæ‰§è¡Œ `6` ä¸ª `TCP` è¿æ¥ã€‚å¦‚æœä¸€æ¬¡è¯·æ±‚åäºŒä¸ªèµ„æºï¼Œå‰ `6` ä¸ªå°†å¼€å§‹ï¼Œå `6` ä¸ªå°†æ’é˜Ÿã€‚ä¸€æ—¦å…¶ä¸­ä¸€ä¸ªè¯·æ±‚å®Œæˆï¼Œé˜Ÿåˆ—ä¸­çš„ç¬¬ä¸€ä¸ªè¯·æ±‚é¡¹ç›®å°†å¼€å§‹å…¶è¯·æ±‚è¿‡ç¨‹ã€‚

![](../Images/devtool_wat.webp)

### TTFB

`TTFB` å°±æ˜¯ç­‰å¾…ç¬¬ä¸€ä¸ªå“åº”å­—èŠ‚çš„æ—¶é—´ï¼Œå»ºè®®åœ¨ `200ms` ä»¥ä¸‹ï¼Œä»¥ä¸‹æƒ…å†µå¯èƒ½ä¼šå¯¼è‡´é«˜ `TTFB`:

- å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´çš„ç½‘ç»œæ¡ä»¶å·®
- æœåŠ¡å™¨ç«¯ç¨‹åºå“åº”å¾ˆæ…¢

### Content Download

å¦‚æœ `Content Download` (å†…å®¹ä¸‹è½½) é˜¶æ®µèŠ±è´¹äº†å¾ˆå¤šæ—¶é—´ï¼Œæé«˜æœåŠ¡å“åº”é€Ÿåº¦ã€å¹¶è¡Œä¸‹è½½ç­‰ä¼˜åŒ–æªæ–½å¸®åŠ©éƒ½ä¸å¤§ã€‚ä¸»è¦çš„è§£å†³æ–¹æ¡ˆæ˜¯å‘é€æ›´å°‘çš„å­—èŠ‚ï¼ˆæ¯”å¦‚ä¸€å¼ é«˜è´¨é‡çš„å¤§å›¾å¯èƒ½å‡  `M` çš„å¤§å°ï¼Œè¿™æ—¶å¯ä»¥é…Œæƒ…ä¼˜åŒ–ä¸€ä¸‹å›¾ç‰‡çš„å®½é«˜ / æ¸…æ™°åº¦ï¼‰

## Source é¢æ¿

![](../Images/devtool_source.webp)

![](../Images/devtool_debug.webp)

## Performance é¢æ¿

> éšèº«æ¨¡å¼å¯ä»¥ä¿è¯ `Chrome` åœ¨ä¸€ä¸ªç›¸å¯¹å¹²å‡€çš„ç¯å¢ƒä¸‹è¿è¡Œã€‚å‡å¦‚å®‰è£…äº†è®¸å¤š chrome æ’ä»¶ï¼Œè¿™äº›æ’ä»¶å¯èƒ½ä¼šå½±å“åˆ†ææ€§èƒ½è¡¨ç°
>
> åœ¨ `Performance` é¢æ¿å¯ä»¥æŸ¥çœ‹é¡µé¢åŠ è½½è¿‡ç¨‹ä¸­çš„è¯¦ç»†ä¿¡æ¯ï¼Œæ¯”å¦‚åœ¨ä»€ä¹ˆæ—¶é—´å¼€å§‹åšä»€ä¹ˆäº‹æƒ…ï¼Œè€—æ—¶å¤šä¹…ç­‰ç­‰ã€‚ç›¸è¾ƒäº `Network` é¢æ¿ï¼Œä¸ä»…å¯ä»¥çœ‹åˆ°é€šè¿‡ç½‘ç»œåŠ è½½èµ„æºçš„ä¿¡æ¯ï¼Œè¿˜èƒ½çœ‹åˆ°è§£æ JSã€è®¡ç®—æ ·å¼ã€é‡ç»˜ç­‰é¡µé¢åŠ è½½çš„æ–¹æ–¹é¢é¢çš„ä¿¡æ¯

![](../Images/performance.webp)

é¢æ¿ä¸»è¦çš„åŒºåŸŸåˆ’åˆ†ï¼š

- `Controls` - å¼€å§‹è®°å½•ï¼Œåœæ­¢è®°å½•å’Œé…ç½®è®°å½•æœŸé—´æ•è·çš„ä¿¡æ¯

- `Overview` - é¡µé¢æ€§èƒ½çš„æ±‡æ€»

- `Flame Chart` - [ç«ç„°å›¾ (çº¿ç¨‹é¢æ¿)]ã€‚åœ¨ç«ç„°å›¾ä¸Šçœ‹åˆ°ä¸‰æ¡ï¼ˆç»¿è‰²çš„æœ‰å¥½å‡ æ¡ï¼‰å‚ç›´çš„è™šçº¿ï¼š

  - è“çº¿ä»£è¡¨ `DOMContentLoaded`Â  äº‹ä»¶
  - ç»¿çº¿ä»£è¡¨é¦–æ¬¡ç»˜åˆ¶çš„æ—¶é—´
  - çº¢çº¿ä»£è¡¨ `load`Â  äº‹ä»¶

- `Details` - åœ¨ `Flame Chart` ä¸­ï¼Œé€‰æ‹©äº†æŸä¸€äº‹ä»¶åï¼Œè¿™éƒ¨åˆ†ä¼šå±•ç¤ºä¸è¿™ä¸ªäº‹ä»¶ç›¸å…³çš„æ›´å¤šä¿¡æ¯ï¼›

### å¼€å§‹è®°å½•

- é¦–å…ˆç‚¹å‡»æ§åˆ¶æ¡å·¦è¾¹çš„ç¬¬ä¸€ä¸ªåœ†åœˆï¼Œå¼€å§‹è®°å½•æ—¥å¿—
- ç­‰å¾…å‡ åˆ†é’Ÿ (æ­£å¸¸æ“ä½œé¡µé¢)
- ç‚¹å‡» `Stop` æŒ‰é’®ï¼Œ`Devtools` åœæ­¢å½•åˆ¶ï¼Œå¤„ç†æ•°æ®ï¼Œç„¶åæ˜¾ç¤ºæ€§èƒ½æŠ¥å‘Š

### controls æ§åˆ¶æ¡åŒºåŸŸ

- `Screenshots` æˆªå›¾ï¼šé»˜è®¤å‹¾é€‰ï¼Œæ¯ä¸€å¸§éƒ½ä¼šæˆªå›¾
- `Memory` å†…å­˜æ¶ˆè€—è®°å½•ï¼šå‹¾é€‰åå¯ä»¥çœ‹åˆ°å„ç§å†…å­˜æ¶ˆè€—æ›²çº¿
- `Disable javaScript samples` [ç¦ç”¨ javaScript ç¤ºä¾‹]ï¼šå‡å°‘åœ¨æ‰‹æœºè¿è¡Œæ—¶ç³»ç»Ÿçš„å¼€é”€ï¼Œæ¨¡æ‹Ÿæ‰‹æœºè¿è¡Œæ—¶å‹¾é€‰
- `Network` [ç½‘ç»œæ¨¡æ‹Ÿ]ï¼šå¯ä»¥æ¨¡æ‹Ÿåœ¨ `3G`, `4G` ç­‰ç½‘ç»œæ¡ä»¶ä¸‹è¿è¡Œé¡µé¢
- `Enable advanced paint instrumentation`(slow) [å¯ç”¨é«˜çº§ç”»å›¾æ£€æµ‹å·¥å…· (æ…¢é€Ÿ)]ï¼šæ•è·é«˜çº§ç”»å›¾æ£€æµ‹å·¥å…·ï¼Œå¸¦æ¥æ˜¾è‘—çš„æ€§èƒ½å¼€é”€
- `CPU` [CPU é™åˆ¶æ€§èƒ½]ï¼šä¸»è¦ä¸ºäº†æ¨¡æ‹Ÿ `CPU` ä¸‹è¿è¡Œæ€§èƒ½

### FPS

ç»¿è‰²ç«–çº¿è¶Šé«˜ï¼Œ`FPS` è¶Šé«˜ã€‚ `FPS` å›¾è¡¨ä¸Šçš„çº¢è‰²å— (ä¸Šå›¾åˆšå¼€å§‹çš„éƒ¨åˆ†) è¡¨ç¤ºé•¿æ—¶é—´å¸§ï¼Œå¾ˆå¯èƒ½ä¼šå‡ºç°å¡é¡¿ã€‚ç«ç„°å›¾çš„ `FPS` å¯ä»¥é‡åŒ–è¿™é¡¹å‚æ•°

### CPU

CPU èµ„æºã€‚æ­¤é¢ç§¯å›¾æŒ‡ç¤ºæ¶ˆè€— CPU èµ„æºçš„äº‹ä»¶ç±»å‹ã€‚åœ¨ CPU å›¾è¡¨ä¸­çš„å„ç§é¢œè‰²ä¸ Summary é¢æ¿é‡Œçš„é¢œè‰²æ˜¯ç›¸äº’å¯¹åº”çš„ï¼ŒSummary é¢æ¿å°±åœ¨ Performance é¢æ¿çš„ä¸‹æ–¹ã€‚

CPU èµ„æºé¢ç§¯å›¾é¢œè‰²åˆ’åˆ†:

|       é¢œè‰²       |           æ‰§è¡Œå†…å®¹           |
| :--------------: | :--------------------------: |
|  è“è‰² (Loading)  |     ç½‘ç»œé€šä¿¡å’Œ HTML è§£æ     |
| é»„è‰² (Scripting) |       JavaScript æ‰§è¡Œ        |
| ç´«è‰² (Rendering) |    æ ·å¼è®¡ç®—å’Œå¸ƒå±€ï¼Œå³é‡æ’    |
| ç»¿è‰² (Painting)  | æ›´æ”¹å¤–è§‚è€Œä¸ä¼šå½±å“å¸ƒå±€ï¼Œé‡ç»˜ |
|   ç°è‰² (other)   |      å…¶å®ƒäº‹ä»¶èŠ±è´¹çš„æ—¶é—´      |
|   ç™½è‰² (Idle)    |           ç©ºé—²æ—¶é—´           |

> é‡ç»˜æ˜¯å½“èŠ‚ç‚¹éœ€è¦æ›´æ”¹å¤–è§‚è€Œä¸ä¼šå½±å“å¸ƒå±€çš„ï¼Œæ¯”å¦‚æ”¹å˜ `color` å°±å«ç§°ä¸ºé‡ç»˜ï¼Œå›æµ (é‡æ’) æ˜¯å¸ƒå±€æˆ–è€…å‡ ä½•å±æ€§éœ€è¦æ”¹å˜å°±ç§°ä¸ºå›æµ
> é‡æ’å¿…å®šä¼šå‘ç”Ÿé‡ç»˜ï¼Œé‡ç»˜ä¸ä¸€å®šä¼šå¼•å‘é‡æ’ã€‚é‡æ’æ‰€éœ€çš„æˆæœ¬æ¯”é‡ç»˜é«˜çš„å¤šï¼Œæ”¹å˜æ·±å±‚æ¬¡çš„èŠ‚ç‚¹å¾ˆå¯èƒ½å¯¼è‡´çˆ¶èŠ‚ç‚¹çš„ä¸€ç³»åˆ—é‡æ’

> js ä¿®æ”¹ dom ç»“æ„æˆ–æ ·å¼ -> è®¡ç®— style -> layout(é‡æ’) -> paint(é‡ç»˜) -> composite(åˆæˆ)

- FP(First Paint): é¦–æ¬¡ç»˜åˆ¶
- FCP(First Contentful Paint)ï¼š ç¬¬ä¸€æ¬¡ä¸°å¯Œå†…å®¹çš„ç»˜å›¾
- FMP(First Meaningful Paint)ï¼šç¬¬ä¸€æ¬¡æœ‰æ„ä¹‰çš„ç»˜å›¾
- LCP(Largest Contentful Paint)ï¼š æœ€å¤§åŒºåŸŸå†…å®¹ç»˜åˆ¶

### performance API

#### memory

- `usedJSHeapSize` è¡¨ç¤ºï¼š`JS` å¯¹è±¡ï¼ˆåŒ…æ‹¬ V8 å¼•æ“å†…éƒ¨å¯¹è±¡ï¼‰å ç”¨çš„å†…å­˜æ•°
- `totalJSHeapSize` è¡¨ç¤ºï¼šå¯ä½¿ç”¨çš„å†…å­˜
- `jsHeapSizeLimit` è¡¨ç¤ºï¼šå†…å­˜å¤§å°é™åˆ¶

é€šå¸¸ï¼Œ`usedJSHeapSize` ä¸èƒ½å¤§äº `totalJSHeapSize`ï¼Œå¦‚æœå¤§äºï¼Œæœ‰å¯èƒ½å‡ºç°äº†å†…å­˜æ³„æ¼ã€‚

#### navigation

##### redirectCount: 0

å¦‚æœæœ‰é‡å®šå‘çš„è¯ï¼Œé¡µé¢é€šè¿‡å‡ æ¬¡é‡å®šå‘è·³è½¬è€Œæ¥

##### type: 0

ç±»ä¼¼äºå°ç¨‹åºå®šä¹‰çš„åœºæ™¯å€¼ï¼Œ`type` çš„å€¼ï¼š

- `0` å³ `TYPE_NAVIGATENEXT` æ­£å¸¸è¿›å…¥é¡µé¢ï¼ˆéåˆ·æ–°ã€éé‡å®šå‘ç­‰)
- `1` å³ `TYPE_RELOAD` é€šè¿‡ `window.location.reload()` åˆ·æ–°çš„é¡µé¢
- `2` å³ `TYPE_BACK_FORWARD` é€šè¿‡æµè§ˆå™¨çš„å‰è¿›åé€€æŒ‰é’®è¿›å…¥çš„é¡µé¢ï¼ˆå†å²è®°å½•ï¼‰
- `255` å³ `TYPE_UNDEFINED` éä»¥ä¸Šæ–¹å¼è¿›å…¥çš„é¡µé¢

### timeOrigin

è¿”å›æ€§èƒ½æµ‹é‡å¼€å§‹æ—¶çš„æ—¶é—´çš„é«˜ç²¾åº¦æ—¶é—´æˆ³

### timing

#### navigationStart: 'æ—¶é—´æˆ³'

åœ¨åŒä¸€ä¸ªæµè§ˆå™¨ä¸Šä¸‹æ–‡ä¸­ï¼Œå‰ä¸€ä¸ªç½‘é¡µï¼ˆä¸å½“å‰é¡µé¢ä¸ä¸€å®šåŒåŸŸï¼‰`unload` çš„æ—¶é—´æˆ³ï¼Œå¦‚æœæ— å‰ä¸€ä¸ªç½‘é¡µ `unload`ï¼Œåˆ™ä¸ `fetchStart` å€¼ç›¸ç­‰ï¼›

#### unloadEventStart: 0

å‰ä¸€ä¸ªç½‘é¡µï¼ˆä¸å½“å‰é¡µé¢åŒåŸŸï¼‰`unload` çš„æ—¶é—´æˆ³ï¼Œå¦‚æœæ— å‰ä¸€ä¸ªç½‘é¡µ `unload` æˆ–è€…å‰ä¸€ä¸ªç½‘é¡µä¸å½“å‰é¡µé¢ä¸åŒåŸŸï¼Œåˆ™å€¼ä¸º `0`

#### unloadEventEnd: 0

å’Œ `unloadEventStart` ç›¸å¯¹åº”ï¼Œè¿”å›å‰ä¸€ä¸ªç½‘é¡µ `unload` äº‹ä»¶ç»‘å®šçš„å›è°ƒå‡½æ•°æ‰§è¡Œç‹å¼¼çš„æ—¶é—´æˆ³

#### redirectStart: 0

ç¬¬ä¸€ä¸ª `HTTP` é‡å®šå‘å‘ç”Ÿæ—¶çš„æ—¶é—´ï¼Œæœ‰è·³è½¬ä¸”æ˜¯åŒåŸŸåå†…éƒ¨çš„é‡å®šå‘æ‰ç®—ï¼Œå¦åˆ™å€¼ä¸º `0`

#### redirectEnd: 0

æœ€åä¸€ä¸ª `HTTP` é‡å®šå‘å®Œæˆæ—¶çš„æ—¶é—´ï¼Œæœ‰è·³è½¬åˆ‡å°”æ˜¯åŒåŸŸåå†…éƒ¨çš„é‡å®šå‘æ‰ç®—ï¼Œå¦åˆ™å€¼ä¸º `0`

#### fetchStart: 'æ—¶é—´æˆ³'

æµè§ˆå™¨å‡†å¤‡å¥½ä½¿ç”¨ `HTTP` è¯·æ±‚æŠ“å–æ–‡æ¡£çš„æ—¶é—´ï¼Œè¿™å‘ç”Ÿåœ¨æ£€æŸ¥æœ¬åœ°ç¼“å­˜ä¹‹å‰

#### domainLookupStart: 'æ—¶é—´æˆ³'

`DNS` åŸŸåæŸ¥è¯¢å¼€å§‹çš„æ—¶é—´ï¼Œå¦‚æœä½¿ç”¨äº†æœ¬åœ°ç¼“å­˜ï¼ˆå³æ—  DNS æŸ¥è¯¢ï¼‰æˆ–æŒä¹…è¿æ¥ï¼Œåˆ™ä¸ `fetchStart` å€¼ç›¸ç­‰

#### domainLookupEnd: 'æ—¶é—´æˆ³'

`DNS` åŸŸåæŸ¥è¯¢å®Œæˆçš„æ—¶é—´ï¼Œå¦‚æœä½¿ç”¨äº†æœ¬åœ°ç¼“å­˜ï¼ˆå³ æ—  DNS æŸ¥è¯¢ï¼‰æˆ–æŒä¹…è¿æ¥ï¼Œåˆ™ä¸ `fetchStart` å€¼ç›¸ç­‰

#### connectStart: 'æ—¶é—´æˆ³'

`HTTP`(TCP) å¼€å§‹å»ºç«‹è¿æ¥çš„æ—¶é—´ï¼Œå¦‚æœæ˜¯æŒä¹…è¿æ¥ï¼Œåˆ™ä¸ `fetchStart` å€¼ç›¸ç­‰ï¼›å¦‚æœåœ¨ä¼ è¾“å±‚å‘ç”Ÿäº†é”™è¯¯ä¸”é‡æ–°å»ºç«‹äº†è¿æ¥ï¼Œåˆ™è¿™é‡Œæ˜¾ç¤ºçš„æ˜¯æ–°å»ºç«‹è¿æ¥çš„æ—¶é—´

#### connectEnd: 'æ—¶é—´æˆ³'

HTTP(TCP) å®Œæˆå»ºç«‹è¿æ¥çš„æ—¶é—´ï¼ˆæ¡æ‰‹ï¼‰ï¼Œå¦‚æœæ˜¯æŒä¹…è¿æ¥ï¼Œåˆ™ä¸ `fetchStart` ç›¸ç­‰ï¼›å¦‚æœæ˜¯åœ¨ä¼ è¾“å±‚å‘ç”Ÿäº†é”™è¯¯ä¸”é‡æ–°å»ºç«‹è¿æ¥ï¼Œåˆ™è¿™é‡Œæ˜¯æ–°å»ºç«‹çš„è¿æ¥å®Œæˆçš„æ—¶é—´ï¼›

#### secureConnectionStart: 0

- `HTTPS` è¿æ¥å¼€å§‹çš„æ—¶é—´ï¼Œå¦‚æœä¸æ˜¯å®‰å…¨è¿æ¥ï¼Œåˆ™å€¼ä¸º 0;

#### requestStart: 'æ—¶é—´æˆ³'

`HTTP` è¯·æ±‚è¯»å–çœŸå®æ–‡æ¡£å¼€å§‹çš„æ—¶é—´ï¼ˆå®Œæˆå»ºç«‹è¿æ¥ï¼‰ï¼ŒåŒ…æ‹¬ä»æœ¬åœ°è¯»å–ç¼“å­˜ï¼Œè¿æ¥é”™è¯¯æ—¶è¿™é‡Œæ˜¾ç¤ºçš„æ˜¯æ–°å»ºç«‹çš„è¿æ¥çš„æ—¶é—´

#### responseStart: 'æ—¶é—´æˆ³'

`HTTP` å¼€å§‹æ¥æ”¶å“åº”çš„æ—¶é—´ï¼ˆè·å–åˆ°ç¬¬ä¸€ä¸ªå­—èŠ‚ï¼‰ï¼ŒåŒ…æ‹¬ä»æœ¬åœ°è¯»å–ç¼“å­˜

#### responseEnd: 0

HTTP å“åº”å…¨éƒ¨æ¥æ”¶å®Œæ¯•çš„æ—¶é—´ï¼ˆè·å–åˆ°æœ€åä¸€ä¸ªå­—èŠ‚ï¼‰ï¼ŒåŒ…æ‹¬ä»æœ¬åœ°è¯»å–çš„ç¼“å­˜

#### domLoading: 0

å¼€å§‹è§£ææ¸²æŸ“ `DOM` æ ‘çš„æ—¶é—´ï¼Œæ­¤æ—¶ `Document.readyState` å˜ä¸º `interactive`ï¼Œå¹¶å°†æŠ›å‡º `readystatechange` ç›¸å…³äº‹ä»¶ï¼ˆè¿™é‡Œåªæ˜¯ DOM æ ‘è§£æå®Œæ¯•ï¼Œè¿™æ—¶å€™å¹¶æ²¡æœ‰å¼€å§‹åŠ è½½ç½‘é¡µå†…çš„

#### dominteractive: 0

å®Œæˆè§£æ `DOM` æ ‘çš„æ—¶é—´ï¼Œ`Document,readyState` å˜ä¸º `interactive`, å¹¶å°†æŠ›å‡º `readystatechange` ç›¸å…³äº‹ä»¶ï¼ˆè¿™æ—¶å€™å¹¶æ²¡æœ‰å¼€å§‹åŠ è½½ç½‘é¡µèµ„æºï¼‰

#### domContentLoadedEventStart: 0

`DOM` è§£æå®Œæˆåï¼Œç½‘é¡µå†…èµ„æºåŠ è½½å¼€å§‹çš„æ—¶é—´ï¼Œåœ¨ `DOMContentLoaded` äº‹ä»¶æŠ›å‡ºä¹‹å‰å‘ç”Ÿ

#### domContentLoadedEventEnd: 0

`DOM` è§£æå®Œæˆåï¼Œç½‘é¡µå†…èµ„æºåŠ è½½å®Œæˆçš„æ—¶é—´

#### domComplete: 0

`DOM` æ ‘è§£æå®Œæˆï¼Œä¸”èµ„æºä¹Ÿå‡†å¤‡å°±ç»ªçš„æ—¶é—´ï¼Œ`Document.readyState` å˜ä¸º `complete`, å¹¶å°†æŠ›å‡º `readystatechange` ç›¸å…³äº‹ä»¶

#### loadEventStart: 0

`load` äº‹ä»¶å‘é€ç»™æ–‡æ¡£ï¼Œä¹Ÿå³ `load` å›è°ƒå‡½æ•°å¼€å§‹æ‰§è¡Œçš„æ—¶é—´ï¼Œå¦‚æœæ²¡æœ‰ç»‘å®š `load` äº‹ä»¶ï¼Œå€¼ä¸º `0`

#### loadEventEnd: 0

`load` äº‹ä»¶çš„å›è°ƒå‡½æ•°æ‰§è¡Œå®Œæ¯•çš„æ—¶é—´

### performance.now() æ–¹æ³•

`performance.now()` è¿”å› `performance.navigationStart` è‡³å½“å‰çš„æ¯«ç§’æ•°ã€‚`performance.navigationStart` æ˜¯æµè§ˆå™¨è®¿é—®æœ€åˆçš„æ—¶é—´æµ‹é‡ç‚¹ã€‚

å€¼å¾—æ³¨æ„çš„ä¸¤ç‚¹ï¼š

- æµ‹é‡åˆå§‹ç‚¹æ˜¯æµè§ˆå™¨è®¿é—®æœ€åˆæµ‹é‡ç‚¹ï¼Œæˆ–è€…ç†è§£ä¸ºåœ¨åœ°å€æ è¾“å…¥ `URL` åæŒ‰å›è½¦çš„é‚£ä¸€ç¬é—´ã€‚
- è¿”å›å€¼æ˜¯æ¯«ç§’æ•°ï¼Œä½†å¸¦æœ‰ç²¾å‡†çš„å¤šä½å°æ•°ã€‚

ç”¨ `performance.now()` æ£€æµ‹ `js` ä»£ç çš„æ‰§è¡Œæ—¶é—´ (æ¯«ç§’):

```js
var st = performance.now()
console.log(
  Array(9999999)
    .fill(null)
    .filter(v => !v).length
)
var end = performance.now()
console.log(`å–å€¼æ—¶é—´${end - st}ms`) // å–å€¼æ—¶é—´ 558.7849999992759ms
```

### timing å†…åŒ…å«äº†å‡ ä¹æ‰€æœ‰æ—¶åºçš„æ—¶é—´èŠ‚ç‚¹

å¯ä»¥é€šè¿‡æ­¤å­—æ®µæ¥ç»Ÿè®¡é¡µé¢ç›¸å…³äº‹ä»¶çš„å‘ç”Ÿæ—¶é•¿ï¼š

```js
function getTiming() {
  try {
    var timing = performance.timing
    var timingObj = {}

    var loadTime = (timing.loadEventEnd - timing.loadEventStart) / 1000

    if (loadTime < 0) {
      setTimeout(function () {
        getTiming()
      }, 0)
      return
    }

    timingObj['é‡å®šå‘æ—¶é—´'] = timing.redirectEnd - timing.redirectStart
    timingObj['DNS è§£ææ—¶é—´'] =
      timing.domainLookupEnd - timing.domainLookupStart
    timingObj['TCP å®Œæˆæ¡æ‰‹æ—¶é—´'] = timing.connectEnd - timing.connectStart
    timingObj['HTTP è¯·æ±‚å“åº”å®Œæˆæ—¶é—´'] =
      timing.responseEnd - timing.requestStart
    timingObj['DOM å¼€å§‹åŠ è½½å‰æ‰€èŠ±è´¹æ—¶é—´'] =
      timing.responseEnd - timing.navigationStart
    timingObj['DOM åŠ è½½å®Œæˆæ—¶é—´'] =
      (timing.domComplete || timing.domLoading) - timing.domLoading
    timingObj['DOM ç»“æ„è§£æå®Œæˆæ—¶é—´'] =
      timing.domInteractive - timing.domLoading
    timingObj['æ€»ä½“ç½‘ç»œäº¤äº’è€—æ—¶ï¼Œå³å¼€å§‹è·³è½¬åˆ°æœåŠ¡å™¨èµ„æºä¸‹è½½å®Œæˆæ—¶é—´'] =
      timing.responseEnd - timing.navigationStart
    timingObj['å¯äº¤äº’çš„æ—¶é—´'] =
      timing.domContentLoadedEventEnd - timing.domContentLoadedEventStart
    timingObj['é¦–æ¬¡å‡ºç°å†…å®¹'] = timing.domLoading - timing.navigationStart
    timingObj['onload äº‹ä»¶æ—¶é—´'] = timing.loadEventEnd - timing.loadEventStart
    timingObj['é¡µé¢å®Œå…¨åŠ è½½æ—¶é—´'] =
      timingObj['é‡å®šå‘æ—¶é—´'] +
      timingObj['DNS è§£ææ—¶é—´'] +
      timingObj['TCP å®Œæˆæ¡æ‰‹æ—¶é—´'] +
      timingObj['HTTP è¯·æ±‚å“åº”å®Œæˆæ—¶é—´'] +
      timingObj['DOM ç»“æ„è§£æå®Œæˆæ—¶é—´'] +
      timingObj['DOM åŠ è½½å®Œæˆæ—¶é—´']

    for (item in timingObj) {
      console.log(item + ':' + timingObj[item] + '(ms)')
    }

    console.log(performance.timing)
  } catch (e) {
    console.log(performance.timing)
  }
}
window.onload = getTiming
```

### performance.getEntries()

æµè§ˆå™¨è·å–ç½‘é¡µæ—¶ï¼Œä¼šå¯¹ç½‘é¡µä¸­æ¯ä¸€ä¸ªå¯¹è±¡ï¼ˆè„šæœ¬æ–‡ä»¶ã€æ ·å¼è¡¨ã€å›¾ç‰‡æ–‡ä»¶ç­‰ç­‰ï¼‰å‘å‡ºä¸€ä¸ª `HTTP` è¯·æ±‚ã€‚`performance.getEntries` æ–¹æ³•ä»¥æ•°ç»„å½¢å¼ï¼Œè¿”å›ä¸€ä¸ª `PerformanceEntry` åˆ—è¡¨ï¼Œè¿™äº›è¯·æ±‚çš„æ—¶é—´ç»Ÿè®¡ä¿¡æ¯ï¼Œæœ‰å¤šå°‘ä¸ªè¯·æ±‚ï¼Œè¿”å›æ•°ç»„å°±ä¼šæœ‰å¤šå°‘ä¸ªæˆå‘˜

- nameï¼šèµ„æºçš„é“¾æ¥
- duration: èµ„æºçš„æ€»è€—æ—¶ï¼ˆåŒ…æ‹¬ç­‰å¾…æ—¶é•¿ï¼Œè¯·æ±‚æ—¶é•¿ï¼Œå“åº”æ—¶é•¿ ç›¸å½“äº responseEnd - startTimeï¼‰
- entryType: èµ„æºç±»å‹ï¼ŒentryType ç±»å‹ä¸åŒæ•°ç»„ä¸­çš„å¯¹è±¡ç»“æ„ä¹Ÿä¸åŒ:

|     å€¼     |         è¯¥ç±»å‹å¯¹è±¡          | æè¿°                                                              |
| :--------: | :-------------------------: | ----------------------------------------------------------------- |
|    mark    |       PerformanceMark       | é€šè¿‡ mark() æ–¹æ³•æ·»åŠ åˆ°æ•°ç»„ä¸­çš„å¯¹è±¡                                |
|  measure   |     PerformanceMeasure      | é€šè¿‡ measure() æ–¹æ³•æ·»åŠ åˆ°æ•°ç»„ä¸­çš„å¯¹è±¡                             |
|   paint    |   PerformancePaintTiming    | å€¼ä¸º first-paint'é¦–æ¬¡ç»˜åˆ¶ã€'first-contentful-paint'é¦–æ¬¡å†…å®¹ç»˜åˆ¶ã€‚ |
|  resource  |  PerformanceResourceTiming  | æ‰€æœ‰èµ„æºåŠ è½½æ—¶é—´ï¼Œç”¨å¤„æœ€å¤š                                        |
| navigation | PerformanceNavigationTiming | ç°é™¤ chrome å’Œ Opera å¤–å‡ä¸æ”¯æŒï¼Œå¯¼èˆªç›¸å…³ä¿¡æ¯                     |
|   frame    |   PerformanceFrameTiming    | ç°æµè§ˆå™¨å‡æœªæ”¯æŒ                                                  |

## æˆªå›¾

å½“ä½ åªæƒ³å¯¹ä¸€ä¸ªç‰¹å®šçš„ `DOM` èŠ‚ç‚¹è¿›è¡Œæˆªå›¾æ—¶ï¼Œå¯èƒ½éœ€è¦ä½¿ç”¨å…¶ä»–å·¥å…·æ“ä½œå¥½ä¹…ï¼Œä½¿ç”¨æ§åˆ¶å°å¯ä»¥ç›´æ¥é€‰ä¸­æƒ³è¦æˆªå›¾çš„èŠ‚ç‚¹ï¼Œæ‰“å¼€ `Command + shift + p` èœå•å¹¶ä¸”ä½¿ç”¨ **èŠ‚ç‚¹æˆªå›¾** å°±å¯ä»¥äº†

- æˆªå–ç‰¹å®šèŠ‚ç‚¹ï¼š `Screenshot Capture node screenshot`
- å…¨å±æˆªå›¾ï¼š `Screenshot Capture full size screenshot`

## Lighthouse(Audits) é¢æ¿

æ¥è‡ª `Google` çš„æè¿°ï¼š `Lighthouse` æ˜¯ä¸€ä¸ªå¼€æºçš„è‡ªåŠ¨åŒ–å·¥å…·ï¼Œç”¨äºæ”¹è¿›ç½‘ç»œåº”ç”¨çš„è´¨é‡ã€‚å®ƒå°†é’ˆå¯¹æ­¤é¡µé¢è¿è¡Œä¸€è¿ä¸²çš„æµ‹è¯•ï¼Œç„¶åç”Ÿæˆä¸€ä¸ªæœ‰å…³é¡µé¢æ€§èƒ½çš„æŠ¥å‘Š
ä¼šå¯¹é¡µé¢çš„åŠ è½½è¿›è¡Œåˆ†æï¼Œç„¶åç»™å‡ºæé«˜é¡µé¢æ€§èƒ½çš„å»ºè®®

æ‡’äººä¸“ç”¨ ğŸ‘

æœ‰ 5 ä¸ªæŒ‡æ ‡:

- `Performance` æ€§èƒ½
- `accessibility` æ— éšœç¢ä½¿ç”¨
- `Best Practice` ç”¨æˆ·ä½“éªŒ
- `SEO` SEO ä¼˜åŒ–
- `Progressive Web App` é¡µå¯¹äº `PWA` çš„å…¼å®¹æ€§

## Security é¢æ¿

ç”¨äºæ£€æµ‹å½“é¢é¡µé¢çš„å®‰å…¨æ€§

è¯¥é¢æ¿å¯ä»¥åŒºåˆ†ä¸¤ç§ç±»å‹çš„ä¸å®‰å…¨çš„é¡µé¢ï¼š

å¦‚æœè¢«è¯·æ±‚çš„é¡µé¢é€šè¿‡ `HTTP` æä¾›æœåŠ¡ï¼Œé‚£ä¹ˆè¿™ä¸ªä¸»æºå°±ä¼šè¢«æ ‡è®°ä¸ºä¸å®‰å…¨ã€‚
å¦‚æœè¢«è¯·æ±‚çš„é¡µé¢æ˜¯é€šè¿‡ `HTTPS` è·å–çš„ï¼Œä½†è¿™ä¸ªé¡µé¢æ¥ç€é€šè¿‡ `HTTP` ç»§ç»­ä»å…¶ä»–æ¥æºæ£€ç´¢å†…å®¹ï¼Œé‚£ä¹ˆè¿™ä¸ªé¡µé¢ä»ç„¶è¢«æ ‡è®°ä¸ºä¸å®‰å…¨ã€‚è¿™å°±æ˜¯æ‰€è°“çš„æ··åˆå†…å®¹é¡µé¢, æ··åˆå†…å®¹é¡µé¢åªæ˜¯éƒ¨åˆ†å—åˆ°ä¿æŠ¤, å› ä¸º `HTTP` å†…å®¹ (éåŠ å¯†çš„å†…å®¹é€šä¿¡ä½¿ç”¨æ˜æ–‡) å¯èƒ½ä¼šè¢«çªƒå¬, å®¹æ˜“å—åˆ°ä¸­é—´äººæ”»å‡»ã€‚å¦‚ `163`ï¼Œè™½ç„¶è¯ä¹¦æ˜¯æœ‰æ•ˆçš„ï¼Œä½†æ˜¯é¡µé¢æœ‰ä¸€éƒ¨åˆ† `http` èµ„æºï¼š
