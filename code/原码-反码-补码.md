# 原码、反码、补码

在深入探讨原码、反码和补码之前，首先需要理解机器数和真值这两个基本概念。

## 机器数和真值

所谓机器数，指的是一个数字在计算机内部使用二进制表示的形式。机器数是带有符号位的，这意味着在计算机系统中，通常使用最高位（即最左边的一位）来表示符号，其中正数标记为 0，负数标记为 1。

以十进制数字 +1 为例，假设计算机的字长为 8 位，其二进制表示形式就是 00000001。相对地，-1 在计算机中的表示则为 10000001。这样，00000001 和 10000001 便分别是 +1 和 -1 的机器数表示。

然而，由于机器数的最高位被用作符号位，这就意味着机器数所表示的形式值并不直接等同于它的实际数值。以有符号数 10000001 为例，尽管它的形式值如果按无符号数解读会是 129（将 10000001 视作无符号二进制数转换成十进制），但由于最高位的 1 表示这是一个负数，其真实的数值应该是 -1，而非形式上的 129。因此，为了区分这一点，我们将带符号位的机器数所对应的实际数值称作该机器数的真值。

## 什么是原码、反码、补码？

在计算机科学中，原码、反码和补码是用于表示有符号二进制数的三种不同方法，特别是在进行算术运算时。它们各自有独特的定义和用途：

### 原码（Sign-Magnitude Representation）

原码是最直观的表示方式，其中最高位用作符号位（0 表示正数，1 表示负数），其余位表示数值的大小。例如，假设我们使用8位来表示数字，+3和-3的原码分别是：

- +3的原码：00000011
- -3的原码：10000011

原码的优点是直观易懂，但它有两个主要缺点：首先，存在+0（00000000）和-0（10000000）的问题，即两个表示0的编码；其次，原码不适合直接进行算术运算，特别是加减法。

### 反码（Ones' Complement）

反码用于解决原码直接运算的问题。对于正数，反码与原码相同；对于负数，反码是将原码中除符号位外的所有位取反（0变1，1变0）。例如：

- +3的反码：00000011（与原码相同）
- -3的反码：11111100（原码10000011的除符号位外所有位取反）

反码解决了加减法运算的一些问题，但仍然存在+0和-0两种表示，且两个最大的负数相加会产生溢出。

### 补码（Two's Complement）

补码是目前计算机系统中最广泛使用的表示方法。对于正数，补码与原码相同；对于负数，补码是在其反码基础上加1。例如：

- +3的补码：00000011（与原码相同）
- -3的补码：11111101（-3的反码11111100加1）

补码的优点包括：只有一个0的表示（00000000），可以直接用于加减法运算，且运算规则简单（加法运算中的溢出可以忽略）。补码的这些特性使得它成为执行算术运算的首选表示方法。

总结来说，原码直观但不适合运算，反码改进了运算但仍有缺点，补码则通过特殊的编码规则解决了这些问题，是计算机内部处理有符号整数运算的标准方式。

## 为何要使用原码、反码和补码？

原码、反码和补码的使用主要是为了解决计算机中有符号数的表示和运算问题。每种表示法都试图以不同的方式解决特定的问题，以提高计算效率和简化电路设计。以下是使用这些表示法的主要原因：

### 原码

1. **直观表示**：原码直观地表示正负数，最高位为符号位，其余位表示数值。这种方法使得人们容易理解和解读二进制数的正负。

2. **简单的转换**：从十进制到二进制的转换（以及反向转换）在原码表示法下非常直接。

尽管原码直观，但它在进行算术运算时效率低下，尤其是需要单独处理加法和减法，同时存在+0和-0两种表示，增加了计算机处理的复杂性。

### 反码

1. **改进的减法运算**：反码通过将减法转换为加法（例如，$A - B$ 相当于 $A + (-B)$）来简化算术运算。在反码系统中，负数的表示是其正值原码的反码。

2. **处理符号位**：反码保留了原码的符号位表示方法，使得符号位的处理相对简单。

然而，反码仍然存在两个零的表示问题，并且在某些情况下，加法运算需要额外的进位处理。

### 补码

1. **统一加法和减法**：补码最大的优势是它将加法和减法统一到一个操作中，简化了计算机的算术逻辑。在补码系统中，减法可以通过添加负数的补码来完成，而无需单独的减法电路。

2. **只有一个零的表示**：补码解决了原码和反码中存在的两个零的表示问题，只有一个零（00000000），这简化了逻辑设计和运算处理。

3. **自然的溢出处理**：在补码系统中，当结果超出表示范围时，自动发生溢出，这可以被有效地忽略或处理，从而简化了计算机的设计和运算逻辑。

4. **优化的存储和运算效率**：补码不仅优化了计算机的算术运算，还减少了需要的硬件，因为加法和减法可以使用相同的电路完成，减少了硬件成本和提高了运算速度。

综上所述，原码、反码和补码的设计和使用，主要是为了有效地在计算机系统中表示和处理有符号整数，每种方法针对特定的问题提供了解决方案，其中补码因其高效和简化的运算处理，在现代计算机系统中被广泛采用。
