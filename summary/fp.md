# 人类高质量函数式编程学习笔记

## 编程范式

### 命令式编程

**命令式编程** 是使用最广的一种编程风格，它是站在计算机的角度去思考问题，主要思想是：**关注计算机执行的步骤，即一步一步告诉计算机先做什么再做什么。**

由于存在很多需要控制的步骤，所以命令式编程普遍存在以下特点：

- **控制语句**
  - 循环语句：`while`、`for`
  - 条件分支语句：`if else`、`switch`
  - 无条件分支语句：`return`、`break`、`continue`
- **变量**
  - 赋值语句

> **🌰 例子：**

```js
// 需求：筛选出数组中为奇数的子集合

const arr = [1, 2, 3, 4, 5, 6, 7, 8, 9]
// 步骤 1：定义执行结果变量
const res = []
// 步骤 2：控制程序循环调用
for (let i = 0; i < arr.length; i++) {
  // 步骤 3：判断筛选条件
  if (arr[i] % 2 !== 0) {
    // 步骤 4：加入执行结果
    res.push(arr[i])
  }
}

// 步骤 5：得到最终的结果 res
console.log(res) // [1, 3, 5, 7, 9]
```

**优点：**

命令式编程的每一个步骤都可以由程序员定义，这样可以更精细化、更严谨地控制代码，从而提高程序的性能。

**缺点：**

命令式编程需要大量的流程控制语句，在处理多线程状态同步问题时，容易造成逻辑混乱，通常需要加锁来解决。

### 声明式编程

**声明式编程** 同样是一种编程风格，它通过定义具体的规则，以便系统底层可以自动实现具体功能。主要思想是：**告诉计算机应该做什么，但不指定具体要怎么做。**

> **用声明式的方式重构例子：**

```js
// 筛选出数组中为奇数的子集合
const array = [1, 2, 3, 4, 5, 6, 7, 8, 9]
const result = array.filter(item => item % 2 !== 0)
console.log(result) // [1, 3, 5, 7, 9]
```

**声明式编程的优缺点：**

- 声明式编程的具体操作都是底层统一管理，可以降低重复工作。
- 声明式编程底层实现的逻辑并不可控，不适合做更精细化的优化。

典型的声明式编程的案例：HTML 标签声明网页的内容。

## 函数式编程

**函数式编程** 属于声明式编程中的一种，它的主要思想是：**将计算机运算看作为函数的计算，也就是把程序问题抽象成数学问题去解决。**

**函数式编程中，所有的变量都是唯一的值**，就像是数学中的代数 `x`、`y`，它们要么还未解出来，要么已经被解出为固定值，所以对于：`x = x + 1` 这样的自增是不合法的，因为修改了代数值，不符合数学逻辑。

除此之外，**严格意义上的函数式编程也不包括循环、条件判断等控制语句**，如果需要条件判断，可以使用三元运算符代替。

**函数式编程有以下几个特点：**

- **函数是一等公民**：函数可以和变量一样，可以赋值给其他变量，也可以作为参数，传入一个函数，或者作为别的函数返回值。

- **只用表达式，不用语句**：表达式是一段单纯的运算过程，总是有返回值。语句是执行某种操作，没有返回值。**函数式编程中的每一步都是单纯的运算**，而且都有返回值。

- **无副作用**：不会产生除运算以外的其他结果。同一个输入永远得到同一个输出。

- **不可变性**：不修改变量，返回一个新的值。

- **引用透明**：函数的运行不依赖于外部变量，只依赖于输入的参数。

## 递归

**递归思想：**

> 递归跟效率没关系，是解决可计算性问题的，图灵可计算的问题都可以通过一些单步的操作加上递归完成，所以有递归就能表述出所有的程序，而且比图灵机程序更直观。至于效率那是实现时候的问题。
<!--  递归是构建现实世界的基本法则之一，递归实际上是对称性的一种体现。-->
> 可计算性理论又称递归论，它是编程的基本思想，不是因为它效率高，是因为它包罗万象。
<!--  编程是用来为现实世界建模的 -->
> **递归的思想就是这样，一个问题可以用 F 函数来代表，而 F 的工作是组合若干小问题的结果，这些小问题依然可以用 F 来表示，只是参数不同。**

**尾递归:**

> [尾递归为啥能优化？](https://zhuanlan.zhihu.com/p/36587160)

**递归转循环:**

> [通用的递归转循环方法](https://zhuanlan.zhihu.com/p/136511316)

**扩展阅读：**

- [递归思想为什么是编程的基本思想，它效率很高吗？](https://www.zhihu.com/question/271081962)
- [重新发明 Y 组合子 JavaScript 版](http://picasso250.github.io/2015/03/31/reinvent-y.html)

## 术语

> [functional-programing-jargon](https://github.com/hemanth/functional-programming-jargon)

## 资料

- [JavaScript函数式编程（一）](https://zhuanlan.zhihu.com/p/21714695)
- [JavaScript函数式编程（二）](https://zhuanlan.zhihu.com/p/21926955)
- [JavaScript函数式编程（三）](https://zhuanlan.zhihu.com/p/22094473)
- [从单位半群到单子](https://zhuanlan.zhihu.com/p/70609434)
- [轻松玩转函数式编程](https://zhuanlan.zhihu.com/p/258634453)
- [函数式编程--Functor、Applicative、Monad](https://zhuanlan.zhihu.com/p/359081403)
- [学习函数式编程 Monad](https://zhuanlan.zhihu.com/p/306339035)
- [从回调地狱到自函子上的幺半群：解密熟悉又陌生的 Monad](https://zhuanlan.zhihu.com/p/32734492)
- [写给小白的 Monad 指北](https://zhuanlan.zhihu.com/p/65449477)
- [Lens 原理及应用](https://zhuanlan.zhihu.com/p/57785858)
- [React 推荐函数组件是纯函数，但是组件有状态就不可能是纯函数，怎么理解有状态的纯函数？](https://www.zhihu.com/question/537538929)
