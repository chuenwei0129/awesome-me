<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      * {
        margin: 0;
        padding: 0;
      }
      #button {
        width: 24px;
        height: 24px;
        position: absolute;
        left: 50vw;
        top: 50vh;
      }
    </style>
  </head>
  <body>
    <div id="button"></div>

    <script>
      let enterIcon =
        '<div><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" class="w-6"><path fill-rule="evenodd" d="M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25zm-1.72 6.97a.75.75 0 10-1.06 1.06L10.94 12l-1.72 1.72a.75.75 0 101.06 1.06L12 13.06l1.72 1.72a.75.75 0 101.06-1.06L13.06 12l1.72-1.72a.75.75 0 10-1.06-1.06L12 10.94l-1.72-1.72z" clip-rule="evenodd"></path></svg></div>'

      let leaveIcon =
        '<div><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" class="w-6"><path stroke-linecap="round" stroke-linejoin="round" d="M9.75 9.75l4.5 4.5m0-4.5l-4.5 4.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div>'

      button.innerHTML = leaveIcon

      let enter = false
      button.addEventListener('mouseenter', function () {
        console.log('mouseenter')

        if (enter) return
        enter = true

        button.innerHTML = enterIcon // 这里可能会触发第二次 mouseenter 事件

        let a = 1
        while (a++ < 100000000); // 模拟主线程耗时操作，不够可以再加个 0
      })

      button.addEventListener('mouseleave', function () {
        console.log('mouseleave')

        enter = false

        button.innerHTML = leaveIcon
      })
    </script>
  </body>
</html>
