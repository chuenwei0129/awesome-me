---
title: 进程间的通信方式
toc: content
order: 1
group:
  title: 操作系统
---

# 进程间有哪些通信方式？

每个进程的用户地址空间都是独立的，一般而言是不能互相访问的，但内核空间是每个进程都共享的，所以进程之间要通信必须通过内核。

![20240409222352](https://raw.githubusercontent.com/chuenwei0129/my-picgo-repo/master/me/20240409222352.png)

## [管道](https://xiaolincoding.com/os/4_process/process_commu.html#%E7%AE%A1%E9%81%93)

![20240409222713](https://raw.githubusercontent.com/chuenwei0129/my-picgo-repo/master/me/20240409222713.png)

## [消息队列](https://xiaolincoding.com/os/4_process/process_commu.html#%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97)

消息这种模型，**两个进程之间的通信就像平时发邮件一样**，你来一封，我回一封，可以频繁沟通了。

但邮件的通信方式存在不足的地方有两点，**一是通信不及时**，**二是附件也有大小限制**，这同样也是消息队列通信不足的点。

消息队列不适合比较大数据的传输，消息队列通信过程中，存在用户态与内核态之间的数据拷贝开销。

## 共享内存

现代操作系统，对于内存管理，采用的是虚拟内存技术，也就是每个进程都有自己独立的虚拟内存空间，不同进程的虚拟内存映射到不同的物理内存中。所以，即使进程 A 和进程 B 的虚拟地址是一样的，其实访问的是不同的物理内存地址，对于数据的增删查改互不影响。

**共享内存的机制，就是拿出一块虚拟地址空间来，映射到相同的物理内存中**。这样这个进程写入的东西，另外一个进程马上就能看到了，都不需要拷贝来拷贝去，传来传去，大大提高了进程间通信的速度。

![20240409223329](https://raw.githubusercontent.com/chuenwei0129/my-picgo-repo/master/me/20240409223329.png)

## Socket

前面提到的管道、消息队列、共享内存都是在同一台主机上进行进程间通信，那要想跨网络与不同主机上的进程之间通信，就需要 Socket 通信了。

实际上，Socket 通信不仅可以跨网络与不同主机的进程间通信，还可以在同主机上进程间通信。可根据创建 Socket 的类型不同，分为三种常见的通信方式，一个是基于 TCP 协议的通信方式，一个是基于 UDP 协议的通信方式，一个是本地进程间通信方式。
