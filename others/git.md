# æ€•é—å¿˜ Git çš„æˆ‘ï¼ŒæŠŠç›¸å…³çŸ¥è¯†ç‚¹éƒ½è®°å½•ä¸‹æ¥å°±å¯¹äº†<!-- omit in toc -->

***ğŸ‘€ TIPS: äºŒçº§æ ‡é¢˜å¯è¿”å›ç›®å½•***

---

> ## ç›®å½•

- [ssh](#ssh)
  - [ç”Ÿæˆä¸€ä¸ª ssh-key](#ç”Ÿæˆä¸€ä¸ª-ssh-key)
  - [å¤åˆ¶ `id_rsa.pub` çš„å†…å®¹](#å¤åˆ¶-id_rsapub-çš„å†…å®¹)
  - [å…¨å±€é…ç½® Git çš„ç”¨æˆ·åå’Œé‚®ç®±](#å…¨å±€é…ç½®-git-çš„ç”¨æˆ·åå’Œé‚®ç®±)
  - [No.1 çš„å°ç§˜ç±](#no1-çš„å°ç§˜ç±)
    - [æŸ¥çœ‹æ˜¯å¦æœ‰æƒé™](#æŸ¥çœ‹æ˜¯å¦æœ‰æƒé™)
    - [ä»£ç†é—®é¢˜](#ä»£ç†é—®é¢˜)
- [Git çš„å·¥ä½œåŒºåŸŸ](#git-çš„å·¥ä½œåŒºåŸŸ)
- [Index æ–‡ä»¶](#index-æ–‡ä»¶)
- [æäº¤å†å²](#æäº¤å†å²)
- [å·¥ä½œæµç¨‹](#å·¥ä½œæµç¨‹)
- [Git åŸºæœ¬æ“ä½œ](#git-åŸºæœ¬æ“ä½œ)
  - [é…ç½®å‘½ä»¤](#é…ç½®å‘½ä»¤)
  - [æŠŠ Git çš„é»˜è®¤åˆ†æ”¯ master ä¿®æ”¹æˆ main](#æŠŠ-git-çš„é»˜è®¤åˆ†æ”¯-master-ä¿®æ”¹æˆ-main)
    - [æŠŠé»˜è®¤åˆ†æ”¯æ”¹ä¸º main](#æŠŠé»˜è®¤åˆ†æ”¯æ”¹ä¸º-main)
    - [ä¿®æ”¹å·²åˆ›å»ºé¡¹ç›®çš„ä¸»åˆ†æ”¯ä¸º main](#ä¿®æ”¹å·²åˆ›å»ºé¡¹ç›®çš„ä¸»åˆ†æ”¯ä¸º-main)
  - [åˆå§‹åŒ–ä»“åº“åŠæ“ä½œ](#åˆå§‹åŒ–ä»“åº“åŠæ“ä½œ)
  - [æ–‡ä»¶çŠ¶æ€](#æ–‡ä»¶çŠ¶æ€)
  - [æ’¤é”€ä¿®æ”¹](#æ’¤é”€ä¿®æ”¹)
  - [git pull](#git-pull)
    - [git pull å‘½ä»¤çš„åŸç†](#git-pull-å‘½ä»¤çš„åŸç†)
    - [git pull å‘½ä»¤ä¸­å„é€‰é¡¹çš„å«ä¹‰](#git-pull-å‘½ä»¤ä¸­å„é€‰é¡¹çš„å«ä¹‰)
  - [åˆå¹¶ä¸¤ä¸ªé»˜è®¤æƒ…å†µä¸‹æ²¡æœ‰å…±åŒåŸºç¡€çš„åˆ†æ”¯](#åˆå¹¶ä¸¤ä¸ªé»˜è®¤æƒ…å†µä¸‹æ²¡æœ‰å…±åŒåŸºç¡€çš„åˆ†æ”¯)
  - [ä¸å»ºè®®åœ¨æ²¡æœ‰ä¸ºåç¦»åˆ†æ”¯æŒ‡å®šåˆå¹¶ç­–ç•¥æ—¶æ‰§è¡Œ pull æ“ä½œ](#ä¸å»ºè®®åœ¨æ²¡æœ‰ä¸ºåç¦»åˆ†æ”¯æŒ‡å®šåˆå¹¶ç­–ç•¥æ—¶æ‰§è¡Œ-pull-æ“ä½œ)
  - [git switch](#git-switch)
  - [git reset](#git-reset)
  - [git restore](#git-restore)
  - [git stage](#git-stage)
  - [git rebase](#git-rebase)
    - [git rebase ä½œç”¨äºåˆ†æ”¯åˆå¹¶](#git-rebase-ä½œç”¨äºåˆ†æ”¯åˆå¹¶)
    - [git rebase äº¤äº’æ¨¡å¼](#git-rebase-äº¤äº’æ¨¡å¼)
    - [git merge å’Œ git rebase çš„åŒºåˆ«](#git-merge-å’Œ-git-rebase-çš„åŒºåˆ«)
    - [è§£å†³ git rebase æ“ä½œåæ¨é€è¿œç«¯åˆ†æ”¯ä¸æˆåŠŸçš„é—®é¢˜](#è§£å†³-git-rebase-æ“ä½œåæ¨é€è¿œç«¯åˆ†æ”¯ä¸æˆåŠŸçš„é—®é¢˜)
  - [git cherry-pick](#git-cherry-pick)
  - [git stash](#git-stash)
  - [é…ç½® git alias æå‡å·¥ä½œæ•ˆç‡](#é…ç½®-git-alias-æå‡å·¥ä½œæ•ˆç‡)
- [å‚è€ƒèµ„æ–™](#å‚è€ƒèµ„æ–™)

## [ssh](#ç›®å½•)

è™½ç„¶ Git å¯ä»¥å·¥ä½œåœ¨ ssh ä¸ https ä¸¤ç§åè®®ä¸Šï¼Œä½†ä¸ºäº†å®‰å…¨æ€§ï¼Œæ›´å¤šæ—¶å€™ä¼šé€‰æ‹© sshã€‚

### ç”Ÿæˆä¸€ä¸ª ssh-key

æ‰§è¡Œå‘½ä»¤

```sh
ssh-keygen -t rsa -C "example@qq.mail"
```

- `-t`: å¯é€‰æ‹© dsa | ecdsa | ed25519 | rsa | rsa1ï¼Œä»£è¡¨åŠ å¯†æ–¹å¼
- `-C`: æ³¨é‡Šï¼Œä¸€èˆ¬å†™è‡ªå·±çš„é‚®ç®±

å¦‚æœæ‰§è¡ŒæˆåŠŸï¼Œåˆ‡æ¢åˆ° `~/.ssh` ç›®å½•ä¸‹ï¼Œæ­¤æ—¶ç›®å½•åº”è¯¥å¦‚ä¸‹æ‰€ç¤ºã€‚

```sh
authorized_keys config id_rsa id_rsa.pub known_hosts
```

> id_rsa / id_rsa.pub: é…å¯¹çš„ç§é’¥ä¸å…¬é’¥

### å¤åˆ¶ `id_rsa.pub` çš„å†…å®¹

ä»¥ Github ä¸ºä¾‹ï¼Œè¿›å…¥ `settings -> SSH and GPG keys` é€šè¿‡ `cat` å‘½ä»¤æŸ¥çœ‹æ–‡ä»¶ `id_rsa.pub` çš„å†…å®¹ï¼Œç„¶åå¤åˆ¶è¿‡æ¥ï¼Œç‚¹å‡» `add ssh key`ï¼Œè¿™ä¸€æ­¥ç­‰äºè¯´æŠŠä½ çš„å…¬é’¥æ”¾åˆ°äº† Github ä¸Šè¿›è¡Œæ‰˜ç®¡ã€‚

![](https://raw.githubusercontent.com/chuenwei0129/my-picgo-repo/master/terminal/-k3u1fbpfcp.webp)

### å…¨å±€é…ç½® Git çš„ç”¨æˆ·åå’Œé‚®ç®±

```sh
git config --global user.name "xxx"
git config --global user.email "xxx@xx.com"
```

å®Œæˆä»¥ä¸Šæ­¥éª¤ï¼Œå°±å¯ä»¥æ„‰å¿« pull ä»£ç å¼€å‘äº†ã€‚

> å’Œ https æ‹‰å–æ–¹å¼ä¸åŒçš„æ˜¯ï¼Œhttps æ–¹å¼éœ€è¦æ¯æ¬¡æäº¤å‰éƒ½æ‰‹åŠ¨è¾“å…¥ç”¨æˆ·åå’Œå¯†ç ï¼Œssh çš„æ–¹å¼é…ç½®å®Œæ¯•å Git éƒ½ä¼šä½¿ç”¨ä½ æœ¬åœ°çš„ç§é’¥å’Œè¿œç¨‹ä»“åº“çš„å…¬é’¥è¿›è¡ŒéªŒè¯æ˜¯å¦æ˜¯ä¸€å¯¹ç§˜é’¥ï¼Œä»è€Œç®€åŒ–äº†æ“ä½œæµç¨‹ã€‚

### No.1 çš„å°ç§˜ç±

#### æŸ¥çœ‹æ˜¯å¦æœ‰æƒé™

```sh
# -v è¯¦ç»†å±•ç¤ºé“¾æ¥è¿‡ç¨‹
ssh -T git@github.com
# Hi chuenwei0129! You've successfully authenticated, but GitHub does not provide shell access.
```

#### ä»£ç†é—®é¢˜

```sh

# è¿™ä¸ªæç¤ºæ˜¯ä¸»è¦æç¤ºæ˜¯ä¸å…è®¸ä½ ä»£ç†è¿™ä¸ª ip ç™»å½• ssh
kex_exchange_identification: Connection closed by remote host
Connection closed by 127.0.0.1 port 7890
```

è§£å†³æ–¹æ¡ˆå°±æ˜¯ç”¨ Github çš„ 443 ç«¯å£ <https://docs.github.com/en/authentication/troubleshooting-ssh/using-ssh-over-the-https-port> æˆ–è€…æŠŠä»£ç†å…³äº†

æ›´å¤šè®¨è®ºï¼š[sshè¿œç¨‹ç™»é™†æœ‰æ—¶å€™æ­£å¸¸ï¼Œæœ‰æ—¶å€™æ˜¾ç¤ºï¼šssh_exchange_identification: Connection closed by remote hostï¼Œè¿™æ˜¯ä»€ä¹ˆåŸå› ï¼Ÿ](https://www.zhihu.com/question/20023544)

## [Git çš„å·¥ä½œåŒºåŸŸ](#ç›®å½•)

![](https://raw.githubusercontent.com/chuenwei0129/my-picgo-repo/master/terminal/613861755_1618028580119_014AA794B8DE2B0593F9F6C4BE7243D9.png)

- **Workspace**ï¼šå·¥ä½œåŒºï¼Œå°±æ˜¯å¹³æ—¶è¿›è¡Œå¼€å‘æ”¹åŠ¨çš„åœ°æ–¹ï¼Œæ˜¯å½“å‰çœ‹åˆ°æœ€æ–°çš„å†…å®¹ï¼Œåœ¨å¼€å‘çš„è¿‡ç¨‹ä¹Ÿå°±æ˜¯å¯¹å·¥ä½œåŒºçš„æ“ä½œã€‚

  > Git å¯ä»¥æŠŠå·¥ä½œåŒºä¸­çš„æ–‡ä»¶å¤„ç†ã€å‹ç¼©æˆä¸€ä¸ªæäº¤å¯¹è±¡ï¼Œä¹Ÿèƒ½å°†å–å¾—çš„æäº¤å¯¹è±¡è§£åŒ…æˆæ–‡ä»¶åŒæ­¥åˆ°å·¥ä½œåŒºä¸­ã€‚

- **Stage / Index**ï¼šæš‚å­˜åŒºï¼Œå½“æ‰§è¡Œ `git add` çš„å‘½ä»¤åï¼Œå·¥ä½œåŒºçš„æ–‡ä»¶å°±ä¼šè¢«ç§»å…¥æš‚å­˜åŒºï¼Œæš‚å­˜åŒºæ ‡è®°äº†å½“å‰å·¥ä½œåŒºä¸­é‚£äº›å†…å®¹æ˜¯è¢« Git ç®¡ç†çš„ï¼Œå½“å®ŒæˆæŸä¸ªéœ€æ±‚æˆ–è€…åŠŸèƒ½åéœ€è¦æäº¤ä»£ç ï¼Œç¬¬ä¸€æ­¥å°±æ˜¯é€šè¿‡ `git add` å…ˆæäº¤åˆ°æš‚å­˜åŒºã€‚

  > Git æŠŠå®ƒä½œä¸ºå·¥ä½œåŒºä¸æäº¤å†å²ä¹‹é—´çš„ä¸­é—´åŒºåŸŸï¼Œæ–¹ä¾¿æˆ‘ä»¬å¯¹æäº¤å†…å®¹è¿›è¡Œç»„ç»‡ï¼šæˆ‘ä»¬å¯èƒ½ä¼šåœ¨å·¥ä½œåŒºåŒæ—¶æ›´æ”¹å¤šä¸ªå®Œå…¨ä¸ç›¸å¹²çš„æ–‡ä»¶ï¼Œè¿™æ—¶å¯ä»¥å°†å®ƒä»¬åˆ†åˆ«æ”¾å…¥æš‚å­˜åŒºï¼Œå¹¶åœ¨ä¸åŒçš„æäº¤ä¸­åŠ å…¥æäº¤å†å²ã€‚æ­¤å¤–æš‚å­˜åŒºè¿˜ç”¨äºåˆå¹¶å†²çªæ—¶å­˜æ”¾æ–‡ä»¶çš„ä¸åŒç‰ˆæœ¬ã€‚
  >
  > é™¤éæ˜¯ä¸€ä¸ªåˆšåˆšåˆå§‹åŒ–çš„ Git ä»“åº“ï¼Œå¦åˆ™æš‚å­˜åŒºå¹¶ä¸æ˜¯ç©ºçš„ï¼Œå®ƒä¼šå¡«å……æœ€è¿‘ä¸€æ¬¡æäº¤æ‰€å¯¹åº”çš„æ–‡ä»¶å¿«ç…§ï¼Œå› æ­¤å½“æˆ‘ä»¬åŸºäºæœ€è¿‘ä¸€æ¬¡æäº¤åœ¨å·¥ä½œåŒºåšäº†ä¸€äº›ä¿®æ”¹ä¹‹åï¼Œgit status ä¼šå°†å·¥ä½œåŒºçš„æ–‡ä»¶ä¸æš‚å­˜åŒºçš„æ–‡ä»¶å¿«ç…§è¿›è¡Œå¯¹æ¯”ï¼Œ å¹¶æç¤ºæˆ‘ä»¬æœ‰å“ªäº›åšäº†ä¿®æ”¹çš„æ–‡ä»¶å°šæœªåŠ å…¥æš‚å­˜åŒºã€‚

- **Repository**ï¼šæœ¬åœ°ä»“åº“ï¼Œä½äºè‡ªå·±çš„ç”µè„‘ä¸Šï¼Œé€šè¿‡ `git commit` æäº¤æš‚å­˜åŒºçš„å†…å®¹ï¼Œä¼šè¿›å…¥æœ¬åœ°ä»“åº“ã€‚

- **Remote**ï¼šè¿œç¨‹ä»“åº“ï¼Œç”¨æ¥æ‰˜ç®¡ä»£ç çš„æœåŠ¡å™¨ï¼Œè¿œç¨‹ä»“åº“çš„å†…å®¹èƒ½å¤Ÿè¢«åˆ†å¸ƒåœ¨å¤šä¸ªåœ°ç‚¹çš„å¤„äºåä½œå…³ç³»çš„æœ¬åœ°ä»“åº“ä¿®æ”¹ï¼Œæœ¬åœ°ä»“åº“ä¿®æ”¹å®Œä»£ç åé€šè¿‡ `git push` å‘½ä»¤åŒæ­¥ä»£ç åˆ°è¿œç¨‹ä»“åº“ã€‚

## [Index æ–‡ä»¶](#ç›®å½•)

æš‚å­˜åŒºå¹¶ä¸åƒå·¥ä½œåŒºæœ‰å¯è§çš„æ–‡ä»¶ç³»ç»Ÿç›®å½•ï¼Œæˆ–è€…åƒæäº¤å†å²ä¸€æ ·é€šè¿‡ `.git/objects` ç›®å½•ä¿å­˜ç€æ‰€æœ‰æäº¤å¯¹è±¡ï¼Œå®ƒæ²¡æœ‰å®é™…å­˜åœ¨çš„ç›®å½•æˆ–æ–‡ä»¶å¤¹ï¼Œå®ƒçš„å®ä½“æ˜¯ä½äº .git ç›®å½•çš„ index æ–‡ä»¶ã€‚ index æ˜¯ä¸€ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶ï¼ŒåŒ…å«ç€ä¸€ä¸ªç”±è·¯å¾„åç§°ã€æƒé™å’Œ blob å¯¹è±¡çš„ SHA-1 å€¼ç»„æˆçš„æœ‰åºåˆ—è¡¨ã€‚

æˆ‘ä»¬å¯ä»¥é€šè¿‡ `git ls-files` å‘½ä»¤æŸ¥çœ‹ index ä¸­çš„å†…å®¹ï¼š

```sh
git ls-files --stage
```

```sh
100644 67045665db202cf951f839a5f3e73efdcfd45021 0 .gitignore
100644 fdddb29aa445bf3d6a5d843d6dd77e10a9f99657 0 LICENSE
100644 da4a4b16b47061a625e8b977a1d7a490982ff75e 0 README.md
100644 984d0d5b2df5ecbb33a45fa601c6750b445a3385 0 index.js
```

index ä¸­è®°å½•äº†æš‚å­˜åŒºæ–‡ä»¶çš„è·¯å¾„åç§°å’Œ SHA-1 IDï¼Œæ–‡ä»¶å†…å®¹å·²ç»ä½œä¸º blob å¯¹è±¡ä¿å­˜åˆ°äº† .git/objects ç›®å½•ä¸­ï¼š

```sh
tree .git/objects -L 2
```

```sh
.git/objects
â”œâ”€â”€ 09
â”‚Â Â  â””â”€â”€ 8749da09bbdb571aa42c4f2c5162aaf3249161
â”œâ”€â”€ 0a
â”‚Â Â  â””â”€â”€ 90005e3d4013c11f5c3b24124badec7da55fcf

......................

â”œâ”€â”€ fd
â”‚Â Â  â””â”€â”€ ddb29aa445bf3d6a5d843d6dd77e10a9f99657
â”œâ”€â”€ info
â””â”€â”€ pack

31 directories, 32 files
```

blob å¯¹è±¡æ˜¯ Git ç”¨æ¥ä¿å­˜æ–‡ä»¶æ•°æ®çš„äºŒè¿›åˆ¶å¯¹è±¡ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ ID å–å¾—å¯¹åº”çš„ blob å¯¹è±¡ï¼Œç”¨ `git cat-file` å‘½ä»¤æ‰“å°å…¶å†…å®¹ï¼š

```sh
git cat-file -p 984d0d5b2df5ecbb33a45fa601c6750b445a3385
```

è¾“å‡º index.js å†…å®¹ï¼š

```js
console.log('Hello World')
```

å½“æˆ‘ä»¬å°†ä¸€ä¸ªä¿®æ”¹è¿‡çš„æ–‡ä»¶åŠ å…¥æš‚å­˜åŒºåï¼Œå¦‚æœåˆåœ¨å·¥ä½œåŒºå¯¹æ–‡ä»¶è¿›è¡Œäº†æ–°çš„ä¿®æ”¹ï¼Œéœ€è¦é‡æ–°å°†å…¶åŠ å…¥æš‚å­˜åŒºï¼Œå› ä¸ºæš‚å­˜åŒºä»¥ blob å¯¹è±¡ä¿å­˜çš„åªæ˜¯æ–‡ä»¶åŠ å…¥æ—¶çš„å†…å®¹ã€‚

**åœ¨ index æ–‡ä»¶ä¸­ï¼Œè¿˜è®°å½•äº†æ¯ä¸€ä¸ªæ–‡ä»¶çš„åˆ›å»ºæ—¶é—´å’Œæœ€åä¿®æ”¹æ—¶é—´ç­‰å…ƒä¿¡æ¯ï¼Œå®ƒé€šè¿‡å¼•ç”¨å®é™…çš„æ•°æ®å¯¹è±¡åŒ…å«äº†ä¸€ä»½å®Œæ•´çš„æ–‡ä»¶å¿«ç…§ï¼Œå› æ­¤å¯ä»¥é€šè¿‡å¯¹æ¯” SHA-1 æ ¡éªŒå’Œå®ç°ä¸å·¥ä½œåŒºæ–‡ä»¶ä¹‹é—´çš„å¿«é€Ÿæ¯”è¾ƒã€‚**

## [æäº¤å†å²](#ç›®å½•)

æäº¤å†å²æ˜¯å·¥ä½œåŒºæ–‡ä»¶åœ¨ä¸åŒæ—¶é—´çš„æ–‡ä»¶å¿«ç…§ï¼ˆå¿«ç…§å³æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹åœ¨ç‰¹å®šæ—¶é—´ç‚¹çš„çŠ¶æ€ï¼ŒåŒ…æ‹¬å†…å®¹å’Œå…ƒä¿¡æ¯ï¼‰ã€‚

æˆ‘ä»¬å¯ä»¥é€šè¿‡ `git log` å‘½ä»¤æŸ¥çœ‹å½“å‰åˆ†æ”¯çš„æäº¤å†å²

![](https://raw.githubusercontent.com/chuenwei0129/my-picgo-repo/master/terminal/SCR-20220402-pld.png)

Git é€šè¿‡ã€Œæäº¤å¯¹è±¡ã€æ¥å‚¨å­˜æ¯ä¸€æ¬¡æäº¤ã€‚è¿™ä¸ª ID æ˜¯ä»¥å¯¹è±¡å†…å®¹è¿›è¡Œ SHA-1 è®¡ç®—å¾—åˆ°çš„å“ˆå¸Œå€¼ï¼Œä¸åŒçš„å†…å®¹ä¸€å®šä¼šå¾—åˆ°ä¸åŒçš„ç»“æœï¼Œ**Git æ—¢æŠŠå®ƒä½œä¸ºæ¯ä¸€ä¸ªå¯¹è±¡ï¼ˆä¸ä»…ä»…æ˜¯æäº¤å¯¹è±¡ï¼‰çš„å”¯ä¸€æ ‡è¯†ç¬¦ï¼Œä¹Ÿç”¨ä½œ `.git/objects` ç›®å½•ä¸­çš„åœ°å€ï¼ˆå…¶ä¸­å­˜å‚¨ç€å®é™…çš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼‰**ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ ID æ‰¾åˆ°å¯¹åº”çš„å¯¹è±¡å¹¶æ‰“å°å…¶å†…å®¹ï¼š

```sh
git cat-file -p 50fd80a
```

```sh
tree 0a90005e3d4013c11f5c3b24124badec7da55fcf
parent 8f23070fc78bf1b8a081c0b28beac3e7f3f9f019
author chuenwei0129 <chuenwei0129@gmail.com> 1648891715 +0800
committer chuenwei0129 <chuenwei0129@gmail.com> 1648891715 +0800

revert ç¬¬ä¸€æ¬¡æäº¤
```

è¿™ä¸ªæäº¤å¯¹è±¡çš„å†…å®¹åŒ…å«ä¸‰éƒ¨åˆ†ï¼š

- å¯¹åº”çš„ tree å¯¹è±¡çš„ ID
- çˆ¶æäº¤å¯¹è±¡çš„ ID
- ä½œè€…ã€æäº¤è€…åŠæäº¤ä¿¡æ¯ç­‰å…ƒä¿¡æ¯

tree å¯¹è±¡ä¸»è¦ç”±å…¶ä»– tree å¯¹è±¡å’Œ blob å¯¹è±¡çš„ ID ä»¥åŠè·¯å¾„åç§°ç»„æˆï¼š

```sh
git ls-tree 0a90005e3d4013c11f5c3b24124badec7da55fcf
```

```sh
100644 blob 67045665db202cf951f839a5f3e73efdcfd45021 .gitignore
100644 blob fdddb29aa445bf3d6a5d843d6dd77e10a9f99657 LICENSE
100644 blob da4a4b16b47061a625e8b977a1d7a490982ff75e README.md
100644 blob ccd0f2ff642e953d8ee04e98a62f8ad8167d05a8 index.js
```

å°±åƒç›®å½•é€’å½’åœ°åŒ…å«å…¶ä»–ç›®å½•å’Œæ–‡ä»¶ä¸€æ ·ï¼Œä¸€ä¸ª tree å¯¹è±¡å³å¯è¡¨ç¤ºæ•´ä¸ªå·¥ä½œåŒºä¸­æ‰€æœ‰å·²æäº¤ç›®å½•åŠæ–‡ä»¶çš„å†…å®¹ï¼Œä¹Ÿå°±æ˜¯è¯´æäº¤å†å²ä¸­çš„æ¯ä¸€ä¸ªæäº¤éƒ½åŒ…å«ç€ä¸€ä»½å®Œæ•´çš„æŸä¸€æ—¶åˆ»çš„æ–‡ä»¶å¿«ç…§ï¼Œå¹¶é€šè¿‡ä¿å­˜ä¸Šä¸€æ¬¡æäº¤çš„å¼•ç”¨å½¢æˆè¿ç»­çš„æ–‡ä»¶å¿«ç…§å†å²ã€‚

## [å·¥ä½œæµç¨‹](#ç›®å½•)

![](https://raw.githubusercontent.com/chuenwei0129/my-picgo-repo/master/terminal/git-three-trees.png)

1. å‡è®¾æˆ‘ä»¬è¿›å…¥åˆ°ä¸€ä¸ªæ–°ç›®å½•ï¼Œå…¶ä¸­æœ‰ä¸€ä¸ª README æ–‡ä»¶ã€‚æ­¤æ—¶æš‚å­˜åŒºä¸ºç©ºï¼Œæäº¤å†å²ä¸ºç©ºï¼ŒHEAD å¼•ç”¨æŒ‡å‘æœªåˆ›å»ºçš„ master åˆ†æ”¯ã€‚

1. ç°åœ¨æˆ‘ä»¬æƒ³æäº¤è¯¥æ–‡ä»¶ï¼Œé¦–å…ˆéœ€è¦é€šè¿‡ `git add` å°†å…¶æ·»åŠ åˆ°æš‚å­˜åŒºã€‚æ­¤æ—¶ Git å°†åœ¨ .git/objects ç›®å½•ä¸­ä»¥è¯¥æ–‡ä»¶çš„å†…å®¹ç”Ÿæˆä¸€ä¸ª blob å¯¹è±¡ï¼Œå¹¶å°† blob å¯¹è±¡çš„ä¿¡æ¯æ·»åŠ åˆ° .git/index æ–‡ä»¶ä¸­ã€‚

1. æ¥ç€è¿è¡Œ `git commit` ï¼Œå®ƒä¼šå–å¾—æš‚å­˜åŒºä¸­çš„å†…å®¹ç”Ÿæˆä¸€ä¸ª tree å¯¹è±¡ï¼Œè¯¥ tree å¯¹è±¡å³ä¸ºå·¥ä½œåŒºæ–‡ä»¶çš„æ°¸ä¹…å¿«ç…§ï¼Œç„¶ååˆ›å»ºä¸€ä¸ªæŒ‡å‘è¯¥ tree å¯¹è±¡çš„æäº¤å¯¹è±¡ï¼Œæœ€åæ›´æ–° master æŒ‡å‘æœ¬æ¬¡æäº¤ã€‚

1. å‡å¦‚æˆ‘ä»¬åœ¨å·¥ä½œåŒºç¼–è¾‘äº†æ–‡ä»¶ï¼ŒGit ä¼šå°†å…¶ä¸æš‚å­˜åŒºç°æœ‰æ–‡ä»¶å¿«ç…§è¿›è¡Œæ¯”è¾ƒï¼Œåœ¨ `git add` äº†æ›´æ”¹çš„æ–‡ä»¶åï¼Œæ ¹æ®æ–‡ä»¶å½“å‰å†…å®¹ç”Ÿæˆæ–°çš„ blob å¯¹è±¡å¹¶æ›´æ–° .git/index æ–‡ä»¶ä¸­çš„å¼•ç”¨ IDã€‚git commit çš„è¿‡ç¨‹ä¸ä¹‹å‰ç±»ä¼¼ï¼Œä½†æ˜¯æ–°çš„æäº¤å¯¹è±¡ä¼šä»¥ HEAD å¼•ç”¨æŒ‡å‘çš„æäº¤ä½œä¸ºçˆ¶æäº¤ï¼Œç„¶åæ›´æ–°å…¶å¼•ç”¨çš„ master æŒ‡å‘æ–°åˆ›å»ºçš„æäº¤ã€‚

1. å½“æˆ‘ä»¬ `git checkout` ä¸€ä¸ªåˆ†æ”¯æˆ–æäº¤æ—¶ï¼Œå®ƒä¼šä¿®æ”¹ HEAD æŒ‡å‘æ–°çš„åˆ†æ”¯å¼•ç”¨æˆ–æäº¤ï¼Œå°†æš‚å­˜åŒºå¡«å……ä¸ºè¯¥æ¬¡æäº¤çš„æ–‡ä»¶å¿«ç…§ï¼Œç„¶åå°†æš‚å­˜åŒºçš„å†…å®¹è§£åŒ…å¤åˆ¶åˆ°å·¥ä½œåŒºä¸­ã€‚

## [Git åŸºæœ¬æ“ä½œ](#ç›®å½•)

### é…ç½®å‘½ä»¤

```sh
# åˆ—å‡ºå½“å‰é…ç½®
git config --list
# åˆ—å‡ºæœ¬åœ° Repository é…ç½®
git config --local --list
# åˆ—å‡ºå…¨å±€é…ç½®
git config --global --list
# åˆ—å‡ºç³»ç»Ÿé…ç½®
git config --system --list
```

### æŠŠ Git çš„é»˜è®¤åˆ†æ”¯ master ä¿®æ”¹æˆ main

#### æŠŠé»˜è®¤åˆ†æ”¯æ”¹ä¸º main

```sh
git config --global init.defaultBranch main
```

#### ä¿®æ”¹å·²åˆ›å»ºé¡¹ç›®çš„ä¸»åˆ†æ”¯ä¸º main

```sh
# æŠŠå½“å‰masteråˆ†æ”¯æ”¹åä¸ºmain, å…¶ä¸­-Mçš„æ„æ€æ˜¯ç§»åŠ¨æˆ–è€…é‡å‘½åå½“å‰åˆ†æ”¯
git branch -M main
```

### åˆå§‹åŒ–ä»“åº“åŠæ“ä½œ

```sh
# åˆå§‹åŒ–ä¸€ä¸ªä»“åº“
git init
# æ·»åŠ æ–‡ä»¶åˆ°æš‚å­˜åŒºï¼Œåé¢å¯ä»¥è·Ÿå¤šä¸ªæ–‡ä»¶ï¼Œä»¥ç©ºæ ¼åŒºåˆ†
git add [æ–‡ä»¶å]
# æ·»åŠ å½“å‰æ›´æ”¹çš„æ‰€æœ‰æ–‡ä»¶åˆ°æš‚å­˜åŒº
git add .
# æäº¤æš‚å­˜çš„æ›´æ”¹ï¼Œä¼šæ–°å¼€ç¼–è¾‘å™¨è¿›è¡Œç¼–è¾‘
git commit
# æäº¤æš‚å­˜çš„æ›´æ”¹ï¼Œå¹¶è®°å½•ä¸‹å¤‡æ³¨
git commit -m [å…³äºæœ¬æ¬¡æäº¤çš„ç›¸å…³è¯´æ˜]
# ç­‰åŒäº git add . && git commit -m
git commit -am [å…³äºæœ¬æ¬¡æäº¤çš„ç›¸å…³è¯´æ˜]
# æŸ¥çœ‹æ–‡ä»¶çŠ¶æ€
git status
# å¦‚æœæ–‡ä»¶æ”¹å˜ï¼Œæ¯”è¾ƒå·¥ä½œåŒºä¸¤ä¸ªæ–‡ä»¶å†…å®¹
git diff
# æ¯”è¾ƒ stage çš„æ–‡ä»¶çš„å·®å¼‚ï¼Œæ­¤æ—¶æ–‡ä»¶å·²ç»æ·»åŠ åˆ° stage äº†
git diff --staged
# æ˜¾ç¤ºæ‰€æœ‰æäº¤è¿‡çš„ç‰ˆæœ¬ä¿¡æ¯ï¼Œä¸åŒ…æ‹¬å·²ç»è¢«åˆ é™¤çš„ commit è®°å½•å’Œ reset çš„æ“ä½œ
git log
# æ˜¾ç¤ºæ‰€æœ‰çš„æ“ä½œè®°å½•ï¼ŒåŒ…æ‹¬æäº¤ï¼Œå›é€€çš„æ“ä½œã€‚ä¸€èˆ¬ç”¨æ¥æ‰¾å‡ºæ“ä½œè®°å½•ä¸­çš„ç‰ˆæœ¬å·ï¼Œè¿›è¡Œå›é€€
git reflog
# è½¯é‡ç½®ï¼Œåªä¼šåˆ é™¤åŸºäºå½“å‰ commit id ä¹‹åçš„ commit ä¿¡æ¯ï¼Œä½†ç›¸åº”çš„æ–‡ä»¶ä¿®æ”¹å¹¶æ²¡æœ‰é‡ç½®
git reset [commit id]
# å›åˆ° commit id å¯¹åº”çš„ç‰ˆæœ¬
git reset --hard [commit id]
# è¿”å›åˆ°å‰ N ä¸ªç‰ˆæœ¬
git reset --hard head~[N]
# è¿”å›åˆ°ä¸Šä¸€ä¸ª commit
git reset --hard head^
# æŠŠæœ¬åœ°ä»“åº“å’Œè¿œç¨‹ä»“åº“å…³è”
git remote add [è¿œç¨‹ä»“åº“å] [è¿œç¨‹ä»“åº“åœ°å€]
# åˆ é™¤è¿œç¨‹ä»“åº“
git remote rm [è¿œç¨‹ä»“åº“å]
# æŸ¥çœ‹è¿œç¨‹ä»“å‚¨åç§°
git remote -v
# ä»è¿œç¨‹ä»“åº“æ‹‰å–ä»£ç å¹¶åˆå¹¶åˆ°æœ¬åœ°ï¼Œå¯ç®€å†™ä¸º git pull ç­‰åŒäº git fetch && git merge
git pull <è¿œç¨‹ä¸»æœºå> <è¿œç¨‹åˆ†æ”¯å>:<æœ¬åœ°åˆ†æ”¯å>
# è·å–è¿œç¨‹ä»“åº“ç‰¹å®šåˆ†æ”¯çš„æœ¬åœ°å¤‡ä»½æ›´æ–°
git fetch <è¿œç¨‹ä¸»æœºå> <åˆ†æ”¯å>
# å½“ä½ æƒ³å°†æŸä¸ªè¿œç¨‹åˆ†æ”¯çš„å†…å®¹å–å›åˆ°æœ¬åœ°ä¸‹æŸä¸ªåˆ†æ”¯çš„è¯
git fetch origin <branch-name>:<local-branch-name>
# è·å–è¿œç¨‹ä»“åº“æ‰€æœ‰åˆ†æ”¯çš„æ›´æ–°
git fetch --all
# æŸ¥çœ‹æœ¬åœ°åˆ†æ”¯
git branch
# æŸ¥çœ‹è¿œç¨‹åˆ†æ”¯
git branch -r
# æŸ¥çœ‹æœ¬åœ°å’Œè¿œç¨‹åˆ†æ”¯
git branch -a
# åˆ›å»ºå¹¶åˆ‡æ¢åˆ°æ–°å»ºåˆ†æ”¯
git checkout -b <branch-name>
# åˆ›å»ºå¹¶åˆ‡æ¢åˆ°æŒ‡å®šåˆ†æ”¯ï¼ˆ -C å¤§å°å†™çš†å¯ï¼‰
git switch -C <new-branch>
# ä»å½“å‰åˆ†æ”¯ï¼Œåˆ‡æ¢åˆ°å…¶ä»–åˆ†æ”¯
git switch <branch-name>
# ä¸ switch å‘½ä»¤ç›¸åŒ
git checkout <branch-name>
# åˆ é™¤åˆ†æ”¯
git branch -d <branch-name>
# åˆ é™¤è¿œç¨‹åˆ†æ”¯
git push origin -d <branch-name>
# å½“å‰åˆ†æ”¯ä¸æŒ‡å®šåˆ†æ”¯åˆå¹¶
git merge <branch-name>
# æŸ¥çœ‹å“ªäº›åˆ†æ”¯å·²ç»åˆå¹¶åˆ°å½“å‰åˆ†æ”¯
git branch --merged
# é‡å‘½ååˆ†æ”¯
git branch -m <old-branch-name> <new-branch-name>
# å¦‚æœå½“å‰åˆ†æ”¯ä¸å¤šä¸ªä¸»æœºå­˜åœ¨è¿½è¸ªå…³ç³»ï¼Œé‚£ä¹ˆè¿™ä¸ªæ—¶å€™ -u é€‰é¡¹ä¼šæŒ‡å®šä¸€ä¸ªé»˜è®¤ä¸»æœºï¼Œè¿™æ ·åé¢å°±å¯ä»¥ä¸åŠ ä»»ä½•å‚æ•°ä½¿ç”¨ git push
git push -u origin main
# å¦‚æœå½“å‰åˆ†æ”¯åªæœ‰ä¸€ä¸ªè¿½è¸ªåˆ†æ”¯ï¼Œé‚£ä¹ˆä¸»æœºåéƒ½å¯ä»¥çœç•¥
git push
# å°†å½“å‰åˆ†æ”¯æ¨é€åˆ° origin ä¸»æœºçš„å¯¹åº”åˆ†æ”¯ï¼Œå¦‚æœä¸Šæ¸¸æ²¡æœ‰å°±ä¼šæ–°å»ºåˆ†æ”¯
git push origin develop
# åˆ é™¤è¿œç¨‹åˆ†æ”¯
git push origin -d <branch-name>
# ç»“æœç±»ä¼¼äº git reset --hard <commit-id> ä½†æ˜¯å®ƒä¸ä¼šé‡ç½®æäº¤å†å²ï¼Œè€Œæ˜¯å¯¹æ­¤æ“ä½œé‡æ–° commit ä¸€ä¸ªæ¶ˆæ¯ï¼Œå¯¹ revert å¯¹åº”çš„ commit-id é‡æ–° revert ä¼šå›åˆ°æ²¡æœ‰ revert çš„çŠ¶æ€
git revert <commit-id>
```

### æ–‡ä»¶çŠ¶æ€

é€šå¸¸æˆ‘ä»¬éœ€è¦æŸ¥çœ‹ä¸€ä¸ªæ–‡ä»¶çš„çŠ¶æ€

```sh
git status
```

- `Changes not staged for commit`

  è¡¨ç¤ºå¾—å¤§æ¦‚å°±æ˜¯å·¥ä½œåŒºæœ‰è¯¥å†…å®¹ï¼Œä½†æ˜¯ç¼“å­˜åŒºæ²¡æœ‰ï¼Œéœ€è¦æˆ‘ä»¬ git add

- `Changes to be committed`

  ä¸€èˆ¬è€Œè¨€ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œæ–‡ä»¶æ”¾åœ¨ç¼“å­˜åŒºäº†ï¼Œæˆ‘ä»¬éœ€è¦ git commit

- `nothing to commit, working tree clean`

  è¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬å°†æœ¬åœ°çš„ä»£ç æ¨é€åˆ°è¿œç«¯å³å¯

### æ’¤é”€ä¿®æ”¹

```sh
git checkout -- [æ–‡ä»¶å]
```

è¯´æ˜: æŠŠæ–‡ä»¶åœ¨**å·¥ä½œåŒº**çš„ä¿®æ”¹å…¨éƒ¨æ’¤é”€ï¼Œè¿™é‡Œæœ‰ä¸¤ç§æƒ…å†µï¼š

- ä¸€ç§æ˜¯æ–‡ä»¶è‡ªä¿®æ”¹åè¿˜æ²¡æœ‰è¢«æ”¾åˆ°æš‚å­˜åŒºï¼Œç°åœ¨ï¼Œæ’¤é”€ä¿®æ”¹å°±å›åˆ°å’Œç‰ˆæœ¬åº“ä¸€æ¨¡ä¸€æ ·çš„çŠ¶æ€ï¼›
- ä¸€ç§æ˜¯æ–‡ä»¶å·²ç»æ·»åŠ åˆ°æš‚å­˜åŒºåï¼Œåˆä½œäº†ä¿®æ”¹ï¼Œç°åœ¨ï¼Œæ’¤é”€ä¿®æ”¹å°±å›åˆ°æ·»åŠ åˆ°æš‚å­˜åŒºåçš„çŠ¶æ€ã€‚
æ€»ä¹‹ï¼Œå°±æ˜¯æ’¤é”€å½“å‰**å·¥ä½œåŒº**çš„ä¿®æ”¹

> ä¸å¸¦è·¯å¾„çš„ `git checkout [commit or branch]` ç”¨äºã€Œæ£€å‡ºã€æŸä¸ªæäº¤æˆ–åˆ†æ”¯ï¼Œæ£€å‡ºå¯ä»¥ç†è§£ä¸ºã€Œæ‹¿å‡ºæ¥æŸ¥çœ‹ã€ã€‚
>
> **è‹¥å·¥ä½œåŒºä¸æš‚å­˜åŒºå­˜åœ¨æœªæäº¤çš„æœ¬åœ°æ›´æ”¹ï¼Œcheckout è¿˜ä¼šå°è¯•å°†æ–‡ä»¶å¿«ç…§ä¸æœ¬åœ°æ›´æ”¹åšç®€å•çš„åˆå¹¶ï¼Œè‹¥åˆå¹¶å¤±è´¥ï¼Œå°†ä¼šä¸­æ­¢æ“ä½œå¹¶æ¢å¤åˆ° checkout ä¹‹å‰çš„çŠ¶æ€ã€‚** å› æ­¤ checkout å¯¹å·¥ä½œåŒºæ˜¯å®‰å…¨çš„ï¼Œå®ƒä¸ä¼šä¸¢å¼ƒå·¥ä½œåŒºæ‰€åšçš„æ›´æ”¹ã€‚

### git pull

#### git pull å‘½ä»¤çš„åŸç†

`git fetch` ä¼šæŸ¥è¯¢ git remote ä¸­æ‰€æœ‰çš„è¿œç¨‹ä»“åº“æ‰€åŒ…å«åˆ†æ”¯çš„æœ€æ–°æäº¤ï¼Œå¹¶å°†å…¶è®°å½•åˆ° **.git/FETCH_HEAD** æ–‡ä»¶ä¸­ã€‚

**.git/FETCH_HEAD** æ˜¯ä¸€ä¸ªç‰ˆæœ¬é“¾æ¥ï¼ŒæŒ‡å‘ç€ç›®å‰å·²ç»ä»è¿œç¨‹ä»“åº“å–ä¸‹æ¥çš„æ‰€æœ‰åˆ†æ”¯çš„æœ€æ–°æäº¤ã€‚

`git pull` å‘½ä»¤ç­‰ä»·äºï¼šå…ˆæ‰§è¡Œ `git fetch`ï¼Œå†æ‰§è¡Œ `git merge FETCH_HEAD` å°†è¿œç¨‹ä»“åº“å¯¹åº”åˆ†æ”¯çš„æœ€æ–°æäº¤åˆå¹¶åˆ°å½“å‰æœ¬åœ°åˆ†æ”¯ä¸­ã€‚

#### git pull å‘½ä»¤ä¸­å„é€‰é¡¹çš„å«ä¹‰

å…¶ä¸­ `git pull` æœ‰è¿™å‡ é¡¹å¸¸è§çš„é€‰é¡¹æ­é…ï¼š

- ä¸å¸¦ä»»ä½•é€‰é¡¹çš„ `git pull` å‘½ä»¤ï¼šå…ˆå°è¯•å¿«è¿›åˆå¹¶ï¼Œå¦‚æœä¸è¡Œå†è¿›è¡Œæ­£å¸¸åˆå¹¶ç”Ÿæˆä¸€ä¸ªæ–°çš„æäº¤ã€‚
- `git pull --ff-only` å‘½ä»¤ï¼šåªå°è¯•å¿«è¿›åˆå¹¶ï¼Œå¦‚æœä¸è¡Œåˆ™ç»ˆæ­¢å½“å‰åˆå¹¶æ“ä½œã€‚
- `git pull --no-ff` å‘½ä»¤ï¼šç¦æ­¢å¿«è¿›åˆå¹¶ï¼Œå³ä¸ç®¡èƒ½ä¸èƒ½å¿«è¿›åˆå¹¶ï¼Œæœ€åéƒ½ä¼šè¿›è¡Œæ­£å¸¸åˆå¹¶ç”Ÿæˆä¸€ä¸ªæ–°çš„æäº¤ã€‚
- `git pull --rebase` å‘½ä»¤ï¼šå…ˆå°è¯•å¿«è¿›åˆå¹¶ï¼Œå¦‚æœä¸è¡Œå†è¿›è¡Œå˜åŸºåˆå¹¶ã€‚

### åˆå¹¶ä¸¤ä¸ªé»˜è®¤æƒ…å†µä¸‹æ²¡æœ‰å…±åŒåŸºç¡€çš„åˆ†æ”¯

> **I always see this error if when I create a new Github repository with a README.md, then pull it to a local repository at the first time.**

```sh
git pull origin <branch-name> --allow-unrelated-histories
```

> "git merge" used to allow merging two branches that have no common base by default, which led to a brand new history of an existing project created and then get pulled by an unsuspecting maintainer, which allowed an unnecessary parallel history merged into the existing project. The command has been taught not to allow this by default, with an escape hatch --allow-unrelated-histories option to be used in a rare event that merges histories of two projects that started their lives independently.

### ä¸å»ºè®®åœ¨æ²¡æœ‰ä¸ºåç¦»åˆ†æ”¯æŒ‡å®šåˆå¹¶ç­–ç•¥æ—¶æ‰§è¡Œ pull æ“ä½œ

å½“ä½¿ç”¨ Git ç‰ˆæœ¬ä¸º 2.27.0 ä»¥ä¸Šæ—¶ï¼Œä½¿ç”¨ `git pull` å‘½ä»¤å‡ºç°ä»¥ä¸‹çš„è­¦å‘Šï¼š

```sh
warning: Pulling without specifying how to reconcile divergent branches is
discouraged. You can squelch this message by running one of the following
commands sometime before your next pull:

  git config pull.rebase false  # merge (the default strategy)
  git config pull.rebase true   # rebase
  git config pull.ff only       # fast-forward only

You can replace "git config" with "git config --global" to set a default
preference for all repositories. You can also pass --rebase, --no-rebase,
or --ff-only on the command line to override the configured default per
invocation.
```

è¯¥è­¦å‘Šçš„ä¸­æ–‡ç‰ˆæœ¬æ–‡æ¡ˆæè¿°å¦‚ä¸‹ï¼š

```sh
warning: ä¸å»ºè®®åœ¨æ²¡æœ‰ä¸ºåç¦»åˆ†æ”¯æŒ‡å®šåˆå¹¶ç­–ç•¥æ—¶æ‰§è¡Œpullæ“ä½œã€‚
æ‚¨å¯ä»¥åœ¨æ‰§è¡Œä¸‹ä¸€æ¬¡pullæ“ä½œä¹‹å‰æ‰§è¡Œä¸‹é¢ä¸€æ¡å‘½ä»¤æ¥æŠ‘åˆ¶æœ¬æ¶ˆæ¯ï¼š

git config pull.rebase false  # åˆå¹¶ï¼ˆé»˜è®¤ç¼ºçœç­–ç•¥ï¼‰
git config pull.rebase true   # å˜åŸº
git config pull.ff only       # ä»…å¿«è¿›

æ‚¨å¯ä»¥å°† "git config" æ›¿æ¢ä¸º "git config --global" ä»¥ä¾¿ä¸ºæ‰€æœ‰ä»“åº“è®¾ç½®
ç¼ºçœçš„é…ç½®é¡¹ã€‚æ‚¨ä¹Ÿå¯ä»¥åœ¨æ¯æ¬¡æ‰§è¡Œ pull å‘½ä»¤æ—¶æ·»åŠ  --rebaseã€--no-rebaseï¼Œ
æˆ–è€… --ff-only å‚æ•°è¦†ç›–ç¼ºçœè®¾ç½®ã€‚
```

**é¦–å…ˆç†è§£ä»€ä¹ˆæ˜¯åç¦»åˆ†æ”¯**ï¼š

å½“æœ¬åœ°çš„åˆ†æ”¯è½åäºè¿œç¨‹åˆ†æ”¯æ—¶ï¼Œæœ¬åœ°åˆ†æ”¯åˆè‡ªè¡Œä¿®æ”¹é¡¹ç›®æ–‡ä»¶ç”Ÿæˆäº†æ–°çš„æäº¤ï¼Œè¿™æ—¶æœ¬åœ°åˆ†æ”¯å†æ‰§è¡Œ `git pull` å‘½ä»¤å°±ä¸èƒ½å¿«è¿›åˆå¹¶ï¼Œå¹¶ä¸”è¿˜å®¹æ˜“å‘ç”Ÿå†²çªã€‚è¿™æ—¶çš„æœ¬åœ°åˆ†æ”¯ä¾¿ç§°ä¸ºåç¦»åˆ†æ”¯ï¼Œå› ä¸ºè¿™æ—¶çš„æœ¬åœ°åˆ†æ”¯çš„æœ€æ–°æäº¤è·Ÿè¿œç¨‹åˆ†æ”¯çš„æœ€æ–°æäº¤ä¸åŒï¼Œäº§ç”Ÿäº†åç¦»ã€‚

**æ¥ç€ç†è§£ä»€ä¹ˆæ˜¯åˆå¹¶ç­–ç•¥**ï¼š

åˆå¹¶ç­–ç•¥ä¾¿æ˜¯ `git merge --ff-only`ã€`git merge --no-ff`ã€`git merge --rebase` è¿™ä¸‰ç§å¸¸è§çš„åˆå¹¶ç­–ç•¥ï¼Œåˆ†åˆ«ä»£è¡¨ç€å¿«è¿›åˆå¹¶ã€éå¿«è¿›æ™®é€šåˆå¹¶ã€å˜åŸºåˆå¹¶ã€‚

è€Œæˆ‘ä»¬æ‰§è¡Œä¸å¸¦ä»»ä½•é€‰é¡¹çš„ `git pull` å‘½ä»¤æ—¶ï¼ŒGit å°±ä¸çŸ¥é“æˆ‘ä»¬åˆ°åº•æƒ³ç”¨å“ªç§åˆå¹¶ç­–ç•¥æ¥æ‰§è¡Œ `git pull`ï¼Œå› æ­¤ Git ä¼šç»™å‡ºä¸Šè¿°çš„è­¦å‘Šæ–‡æ¡ˆï¼Œå»ºè®®æˆ‘ä»¬é€šè¿‡`git config` å‘½ä»¤åº”è¯¥æŒ‰ç…§è¿™ä¸‰ç§åˆå¹¶ç­–ç•¥çš„å“ªç§æ¥æ‰§è¡Œã€‚

**è§£å†³é—®é¢˜**ï¼š

- ä¿æŒå½“å‰çš„é»˜è®¤åˆå¹¶ç­–ç•¥ï¼š`git config pull.rebase false`ï¼Œ
å› ä¸º `pull.ff` é»˜è®¤æ˜¯æ²¡æœ‰æŒ‡å®šçš„ï¼Œè€Œæ²¡æœ‰æŒ‡å®šçš„ `pull.ff` çš„é»˜è®¤å€¼ä¸æ˜¾å¼æŒ‡å®šä¸º `false` çš„æ•ˆæœä¸€è‡´ã€‚
- `git pull` æ—¶åªæ¥å—å¿«è¿›åˆå¹¶å’Œå˜åŸºåˆå¹¶ï¼š`git config pull.ff only`ï¼Œä¿è¯æ¯æ¬¡æ‰§è¡Œä¸å¸¦é€‰é¡¹çš„ `git pull` æ—¶è¦ä¹ˆå¿«è¿›åˆå¹¶æˆåŠŸï¼Œè¦ä¹ˆå¿«è¿›åˆå¹¶å¤±è´¥ã€‚å¦‚æœå¿«è¿›åˆå¹¶å¤±è´¥ï¼Œå†æ˜¾å¼æ‰§è¡Œ `git pull --rebase` è¿›è¡Œå˜åŸºåˆå¹¶å³å¯ã€‚

### git switch

`git switch` å‘½ä»¤ä¸“é—¨ç”¨äºåˆ‡æ¢åˆ†æ”¯ï¼Œå¯ä»¥ç”¨æ¥æ›¿ä»£ `checkout` çš„éƒ¨åˆ†ç”¨é€”ã€‚

**åˆ›å»ºå¹¶åˆ‡æ¢åˆ°æŒ‡å®šåˆ†æ”¯ï¼ˆ -C å¤§å°å†™çš†å¯ï¼‰**ï¼š

```sh
git switch -C <new-branch>
```

åˆ‡æ¢åˆ°å·²æœ‰åˆ†æ”¯ï¼š

```sh
git switch <branch>
```

å’Œ `checkout` ä¸€æ ·ï¼Œ`switch` å¯¹å·¥ä½œåŒºæ˜¯å®‰å…¨çš„ï¼Œå®ƒä¼šå°è¯•åˆå¹¶å·¥ä½œåŒºå’Œæš‚å­˜åŒºä¸­çš„æœ¬åœ°æ›´æ”¹ï¼Œå¦‚æœæ— æ³•å®Œæˆåˆå¹¶åˆ™ä¼šä¸­æ­¢æ“ä½œï¼Œæœ¬åœ°æ›´æ”¹ä¼šè¢«ä¿ç•™ã€‚

`switch` çš„ä½¿ç”¨æ–¹å¼ç®€å•ä¸”ä¸“ä¸€ï¼Œå®ƒæ— æ³•åƒ `checkout` ä¸€æ ·å¯¹æŒ‡å®šæäº¤ä½¿ç”¨ï¼š

```sh
git switch ea4c48a
```

fatal: æœŸæœ›ä¸€ä¸ªåˆ†æ”¯ï¼Œå¾—åˆ°æäº¤ 'ea4c48a'

### git reset

`git reset` çš„ä¸»è¦ä½œç”¨æ˜¯å°† HEAD é‡ç½®ä¸ºæŒ‡å®šçš„æäº¤ï¼Œæœ‰ -â€”softã€--mixedã€--hard ä¸‰ç§ä¸»è¦çš„å‘½ä»¤é€‰é¡¹ã€‚

- `--soft` åªä¼šå¯¹æäº¤å†å²è¿›è¡Œé‡ç½®ï¼Œä¸ä¼šå†å¯¹æš‚å­˜åŒºä»¥åŠå·¥ä½œåŒºè¿›è¡Œä»»ä½•æ›´æ”¹ã€‚

- `--mixed` é€‰é¡¹æ˜¯ `git reset` å®ƒé™¤äº†é‡ç½®æäº¤å†å²ï¼Œè¿˜ä¼šæ›´æ–°æš‚å­˜åŒºï¼Œä¾‹å¦‚æš‚å­˜åŒºæœ‰æœªæäº¤çš„æ–‡ä»¶ï¼Œå·¥ä½œåŒºåˆå¯¹æ–‡ä»¶åšäº†ä¿®æ”¹ï¼Œä»–ä¼šç›´æ¥æŠŠæš‚å­˜åŒºçš„ä¿®æ”¹ä¸¢æ‰ã€‚

- `--hard` æ˜¯ reset æœ€ç›´æ¥ã€æœ€å±é™©ä»¥åŠæœ€å¸¸ç”¨çš„é€‰é¡¹ã€‚å®ƒé™¤äº†é‡ç½®æäº¤å†å²ï¼Œå·¥ä½œåŒºå’Œæš‚å­˜åŒºä¸­æ‰€æœ‰æœªæäº¤çš„æ›´æ”¹éƒ½ä¼šæ°¸ä¹…ä¸¢å¤±ï¼Œä½†è¢«é‡ç½®çš„æäº¤ä»æœ‰åŠæ³•æ‰¾å›ã€‚

å¦ä¸€ä¸ªå…³äº reset çš„å®è·µæ˜¯ï¼Œä¸è¦åœ¨å…¬å…±åˆ†æ”¯ä¸Šæ‰§è¡Œ resetã€‚å…¬å…±åˆ†æ”¯æ˜¯æŒ‡ä½ ä¸å…¶ä»–å›¢é˜Ÿæˆå‘˜åä½œå¼€å‘çš„åˆ†æ”¯ã€‚å¦‚æœä½ éœ€è¦ä¿®å¤ä¸€ä¸ªå…¬å…±æäº¤å¼•å…¥çš„é—®é¢˜ï¼Œè¯·ä½¿ç”¨ä¸“é—¨ä¸ºæ­¤ç›®çš„è®¾è®¡çš„ `git revert`ã€‚

### git restore

`restore` å‘½ä»¤ç”¨äºè¿˜åŸå·¥ä½œåŒºæˆ–æš‚å­˜åŒºä¸­çš„æŒ‡å®šæ–‡ä»¶æˆ–æ–‡ä»¶é›†åˆï¼š

```sh
# æ’¤é”€å·¥ä½œåŒºçš„ä¿®æ”¹
git restore [æ–‡ä»¶å] #åŒ git checkout -- [æ–‡ä»¶å] åŒä»·
# æ’¤é”€æš‚å­˜åŒºçš„ä¿®æ”¹
git restore [æ–‡ä»¶å] --staged
```

### git stage

æ·»åŠ æ–‡ä»¶åˆ°æš‚å­˜åŒº

> git çš„ addï¼Œæ˜¯ä¸€ä¸ªå®¹æ˜“å¼•èµ·ç–‘é—®çš„å‘½ä»¤ã€‚åŒæ—¶ï¼Œ`git diff --cached` æ˜¯æ¯”è¾ƒ stage çš„æ–‡ä»¶çš„å·®å¼‚çš„ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªä¸ç›´è§‚çš„å‘½ä»¤ã€‚

github 2008 å¹´çš„ blog ä¸­ï¼Œä¹Ÿæåˆ°ï¼Œå®¹æ˜“å¼•èµ·æ··æ·†ï¼š

> things like making use of the term â€˜stageâ€™ for things that happen in the index (such as using â€˜git diff â€”stagedâ€™ instead of â€˜git diff â€”cachedâ€™) is being worked on. Iâ€™m excited that staging files may soon be done via â€˜git stageâ€™ rather-than/in-addition-to â€˜git addâ€™. This is nice for new users who often have a hard time seeing why you have to keep â€˜git addâ€™ing to stage your changes.

äº‹å®ä¸Šï¼Œåœ¨ git çš„åç»­ç‰ˆæœ¬ä¸­ï¼Œå°±åšäº†ä¸¤ä¸ªä¿®æ”¹ï¼š

`git stage` ä½œä¸º `git add` çš„ä¸€ä¸ªåŒä¹‰è¯

`git diff --staged` ä½œä¸º `git diff --cached` çš„ç›¸åŒå‘½ä»¤

ä¸ºäº†å®¹æ˜“ç†è§£ï¼Œæ¨èå¤§å®¶ä½¿ç”¨ `git stage` å’Œ `git diff --staged` è¿™ä¸¤ä¸ªå‘½ä»¤ï¼Œè€Œ `git add` å’Œ `git diff --cached` è¿™ä¸¤ä¸ªå‘½ä»¤ï¼Œä»…ä»…ä¸ºäº†ä¿æŒå’Œä»¥å‰çš„å…¼å®¹åšä¿ç•™ã€‚

### git rebase

#### git rebase ä½œç”¨äºåˆ†æ”¯åˆå¹¶

> rebase ç¿»è¯‘ä¸ºå˜åŸºï¼Œä»–çš„ä½œç”¨å’Œ merge å¾ˆç›¸ä¼¼ï¼Œç”¨äºæŠŠä¸€ä¸ªåˆ†æ”¯çš„ä¿®æ”¹åˆå¹¶åˆ°å½“å‰åˆ†æ”¯ä¸Šã€‚

![](https://raw.githubusercontent.com/chuenwei0129/my-picgo-repo/master/terminal/b169721a6bfc42a7b4754f7c5d65672d_tplv-k3u1fbpfcp-zoom-in-crop-mark_1304_0_0_0.webp)

#### git rebase äº¤äº’æ¨¡å¼

åœ¨å¼€å‘ä¸­ï¼Œå¸¸ä¼šé‡åˆ°åœ¨ä¸€ä¸ªåˆ†æ”¯ä¸Šäº§ç”Ÿäº†å¾ˆå¤šçš„æ— æ•ˆçš„æäº¤ï¼Œè¿™ç§æƒ…å†µä¸‹ä½¿ç”¨ rebase çš„äº¤äº’å¼æ¨¡å¼å¯ä»¥æŠŠå·²ç»å‘ç”Ÿçš„å¤šæ¬¡æäº¤å‹ç¼©æˆä¸€æ¬¡æäº¤ï¼Œå¾—åˆ°äº†ä¸€ä¸ªå¹²å‡€çš„æäº¤å†å²ï¼Œä¾‹å¦‚æŸä¸ªåˆ†æ”¯çš„æäº¤å†å²æƒ…å†µå¦‚ä¸‹ï¼š

![](https://raw.githubusercontent.com/chuenwei0129/my-picgo-repo/master/terminal/SCR-20220403-147.png)

è¿›å…¥äº¤äº’å¼æ¨¡å¼çš„æ–¹å¼æ˜¯æ‰§è¡Œï¼š

```sh
git rebase -i <base-commit>
```

å‚æ•° `base-commit` å°±æ˜¯æŒ‡æ˜æ“ä½œçš„åŸºç‚¹æäº¤å¯¹è±¡ï¼ŒåŸºäºè¿™ä¸ªåŸºç‚¹è¿›è¡Œ `rebase` çš„æ“ä½œï¼Œå¯¹äºä¸Šè¿°æäº¤å†å²çš„ä¾‹å­ï¼Œæˆ‘ä»¬è¦æŠŠæœ€åçš„ä¸€ä¸ªæäº¤å¯¹è±¡ï¼ˆ 8061e866 ï¼‰ä¹‹å‰çš„æäº¤å‹ç¼©æˆä¸€æ¬¡æäº¤ï¼Œæˆ‘ä»¬éœ€è¦æ‰§è¡Œçš„å‘½ä»¤æ ¼å¼æ˜¯ï¼š

```sh
git rebase -i 8061e866
```

æ­¤æ—¶ä¼šè¿›å…¥ä¸€ä¸ª vim çš„äº¤äº’å¼é¡µé¢ï¼Œç¼–è¾‘å™¨åˆ—å‡ºçš„ä¿¡æ¯åƒä¸‹åˆ—è¿™æ ·ã€‚

![](https://raw.githubusercontent.com/chuenwei0129/my-picgo-repo/master/terminal/SCR-20220403-1c4.png)

æƒ³è¦åˆå¹¶è¿™ä¸€å †æ›´æ”¹ï¼Œæˆ‘ä»¬è¦ä½¿ç”¨ Squash ç­–ç•¥è¿›è¡Œåˆå¹¶ï¼Œå³æŠŠå½“å‰çš„ commit å’Œå®ƒçš„ä¸Šä¸€ä¸ª commit å†…å®¹è¿›è¡Œåˆå¹¶ï¼Œ å¤§æ¦‚å¯ä»¥è¡¨ç¤ºä¸ºä¸‹é¢è¿™æ ·ï¼Œåœ¨äº¤äº’æ¨¡å¼çš„ rebase ä¸‹ï¼Œè‡³å°‘ä¿ç•™ä¸€ä¸ª pickï¼Œå¦åˆ™å‘½ä»¤ä¼šæ‰§è¡Œå¤±è´¥ã€‚

ä¿®æ”¹æ–‡ä»¶å æŒ‰ä¸‹ : ç„¶å wq ä¿å­˜é€€å‡ºï¼Œæ­¤æ—¶åˆä¼šå¼¹å‡ºä¸€ä¸ªç¼–è¾‘é¡µé¢ï¼Œè¿™ä¸ªé¡µé¢æ˜¯ç”¨æ¥ç¼–è¾‘æäº¤çš„ä¿¡æ¯ï¼Œä¿®æ”¹ä¸º feat: å˜åŸºï¼Œæœ€åä¿å­˜ä¸€ä¸‹

![](https://raw.githubusercontent.com/chuenwei0129/my-picgo-repo/master/terminal/SCR-20220403-1be.png)

> ç‰¹åˆ«æ³¨æ„ï¼Œåªèƒ½åœ¨è‡ªå·±ä½¿ç”¨çš„ feature åˆ†æ”¯ä¸Šè¿›è¡Œ rebase æ“ä½œï¼Œä¸å…è®¸åœ¨é›†æˆåˆ†æ”¯ä¸Šè¿›è¡Œ rebaseï¼Œå› ä¸ºè¿™ç§æ“ä½œä¼šä¿®æ”¹é›†æˆåˆ†æ”¯çš„å†å²è®°å½•ã€‚

#### git merge å’Œ git rebase çš„åŒºåˆ«

ä¸åŒäº `git rebase` çš„æ˜¯ï¼Œ`git merge` åœ¨ä¸æ˜¯ fast-forwardï¼ˆå¿«é€Ÿåˆå¹¶ï¼‰çš„æƒ…å†µä¸‹ï¼Œä¼šäº§ç”Ÿä¸€æ¡é¢å¤–çš„åˆå¹¶è®°å½•ï¼Œç±»ä¼¼ `Merge branch 'xxx' into 'xxx'` çš„ä¸€æ¡æäº¤ä¿¡æ¯ã€‚

å¦å¤–ï¼Œåœ¨è§£å†³å†²çªçš„æ—¶å€™ï¼Œç”¨ merge åªéœ€è¦è§£å†³ä¸€æ¬¡å†²çªå³å¯ï¼Œç®€å•ç²—æš´ï¼Œè€Œç”¨ rebase çš„æ—¶å€™ ï¼Œéœ€è¦ä¾æ¬¡è§£å†³æ¯æ¬¡çš„å†²çªï¼Œæ‰å¯ä»¥æäº¤ã€‚

#### è§£å†³ git rebase æ“ä½œåæ¨é€è¿œç«¯åˆ†æ”¯ä¸æˆåŠŸçš„é—®é¢˜

```sh
git push -f
```

### git cherry-pick

`git cherry-pick` å¯ä»¥ç†è§£ä¸ºâ€æŒ‘æ‹£â€æäº¤ï¼Œå’Œ merge åˆå¹¶ä¸€ä¸ªåˆ†æ”¯çš„æ‰€æœ‰æäº¤ä¸åŒçš„æ˜¯ï¼Œå®ƒä¼šè·å–æŸä¸€ä¸ªåˆ†æ”¯çš„å•ç¬”æäº¤ï¼Œå¹¶ä½œä¸ºä¸€ä¸ªæ–°çš„æäº¤å¼•å…¥åˆ°ä½ å½“å‰åˆ†æ”¯ä¸Šã€‚å½“æˆ‘ä»¬éœ€è¦åœ¨æœ¬åœ°åˆå…¥å…¶ä»–åˆ†æ”¯çš„æäº¤æ—¶ï¼Œå¦‚æœæˆ‘ä»¬ä¸æƒ³å¯¹æ•´ä¸ªåˆ†æ”¯è¿›è¡Œåˆå¹¶ï¼Œè€Œæ˜¯åªæƒ³å°†æŸä¸€æ¬¡æäº¤åˆå…¥åˆ°æœ¬åœ°å½“å‰åˆ†æ”¯ä¸Šï¼Œé‚£ä¹ˆå°±è¦ä½¿ç”¨ `git cherry-pick` äº†ã€‚

### git stash

ä¼šæœ‰è¿™ä¹ˆä¸€ä¸ªåœºæ™¯ï¼Œç°åœ¨ä½ æ­£åœ¨ç”¨ä½ çš„ feature åˆ†æ”¯ä¸Šå¼€å‘æ–°åŠŸèƒ½ã€‚è¿™æ—¶ï¼Œç”Ÿäº§ç¯å¢ƒä¸Šå‡ºç°äº†ä¸€ä¸ª bug éœ€è¦ç´§æ€¥ä¿®å¤ï¼Œä½†æ˜¯ä½ è¿™éƒ¨åˆ†ä»£ç è¿˜æ²¡å¼€å‘å®Œï¼Œä¸æƒ³æäº¤ï¼Œæ€ä¹ˆåŠï¼Ÿè¿™ä¸ªæ—¶å€™å¯ä»¥ç”¨ `git stash` å‘½ä»¤å…ˆæŠŠå·¥ä½œåŒºå·²ç»ä¿®æ”¹çš„æ–‡ä»¶æš‚å­˜èµ·æ¥ï¼Œç„¶ååˆ‡æ¢åˆ° hotfix åˆ†æ”¯ä¸Šè¿›è¡Œ bug çš„ä¿®å¤ï¼Œä¿®å¤å®Œæˆåï¼Œåˆ‡æ¢å› feature åˆ†æ”¯ï¼Œä»å †æ ˆä¸­æ¢å¤åˆšåˆšä¿å­˜çš„å†…å®¹ã€‚

åŸºæœ¬å‘½ä»¤å¦‚ä¸‹

```sh
git stash #æŠŠæœ¬åœ°çš„æ”¹åŠ¨æš‚å­˜èµ·æ¥
git stash save "message" # æ‰§è¡Œå­˜å‚¨æ—¶ï¼Œæ·»åŠ å¤‡æ³¨ï¼Œæ–¹ä¾¿æŸ¥æ‰¾ã€‚
git stash pop # åº”ç”¨æœ€è¿‘ä¸€æ¬¡æš‚å­˜çš„ä¿®æ”¹ï¼Œå¹¶åˆ é™¤æš‚å­˜çš„è®°å½•
git stash apply  # åº”ç”¨æŸä¸ªå­˜å‚¨,ä½†ä¸ä¼šæŠŠå­˜å‚¨ä»å­˜å‚¨åˆ—è¡¨ä¸­åˆ é™¤ï¼Œé»˜è®¤ä½¿ç”¨ç¬¬ä¸€ä¸ªå­˜å‚¨,å³ stash@{0}ï¼Œå¦‚æœè¦ä½¿ç”¨å…¶ä»–ä¸ªï¼Œgit stash apply stash@{$num}
git stash list # æŸ¥çœ‹ stash æœ‰å“ªäº›å­˜å‚¨
git stash clear # åˆ é™¤æ‰€æœ‰ç¼“å­˜çš„ stash
```

ä¾‹å¦‚ï¼Œæˆ‘æ­£åœ¨å¼€å‘ä¸€ä¸ªæ–°åŠŸèƒ½ï¼Œä¿®æ”¹äº† 1.js æ–‡ä»¶é‡Œçš„å†…å®¹ï¼Œ

è¿˜æ²¡å¼€å‘å®Œæˆï¼Œè¿™ä¸ªæ—¶å€™ï¼Œæˆ‘æƒ³åˆ‡æ¢åˆ° hotfix åˆ†æ”¯ä¸Šä¿®å¤ bugï¼Œå¾—æš‚åœä¸‹å¼€å‘åˆ‡æ¢åˆ° hotfix åˆ†æ”¯ï¼Œä½†æ˜¯ç°åœ¨å·¥ä½œåŒºè¿˜æœ‰å†…å®¹ï¼Œæ­¤æ—¶å¦‚æœåˆ‡æ¢åˆ†æ”¯ Git ä¼šæŠ¥å‡ºä¸‹é¢çš„é”™è¯¯

```sh
error: Your local changes to the following files would be overwritten by checkout:
        1.js
Please commit your changes or stash them before you switch branches.
Aborting
```

![](https://raw.githubusercontent.com/chuenwei0129/my-picgo-repo/master/terminal/SCR-20220403-74s.png)

ä¸Šé¢é‚£å¥è¯çš„æ„æ€å°±æ˜¯è¯´å·¥ä½œåŒºæœ‰æ–‡ä»¶ä¿®æ”¹ï¼Œä¸èƒ½æäº¤ï¼Œéœ€è¦å…ˆè¿›è¡Œ commit æˆ–è€… stash æ“ä½œï¼Œæ‰§è¡Œ git stashï¼Œç»“æœå¦‚ä¸‹

```sh
Saved working directory and index state WIP on stash: 22e561c feat: add 1.js
```

![](https://raw.githubusercontent.com/chuenwei0129/my-picgo-repo/master/terminal/SCR-20220403-76d.png)

æ­¤æ—¶ï¼Œæˆ‘ä»¬çš„å·¥ä½œåŒºå·²ç»å¹²å‡€äº†ï¼Œå¯ä»¥åˆ‡æ¢åˆ° hotfix åˆ†æ”¯è¿›è¡Œ bug ä¿®å¤çš„å·¥ä½œï¼Œå‡è®¾æˆ‘ä»¬ç°åœ¨ bug ä¿®å¤å®Œæˆäº†ï¼Œç»§ç»­åˆ‡å› feature åˆ†æ”¯è¿›è¡ŒåŸæœ¬åŠŸèƒ½çš„å¼€å‘ï¼Œæ­¤æ—¶åªéœ€è¦æ‰§è¡Œ `git stash pop`ï¼Œä¹‹å‰æˆ‘ä»¬æš‚å­˜çš„ä¿®æ”¹å°±ä¼šæ¢å¤åˆ°å·¥ä½œåŒºï¼Œå¦‚ä¸‹å›¾æ‰€ç¤º

![](https://raw.githubusercontent.com/chuenwei0129/my-picgo-repo/master/terminal/SCR-20220403-776.png)

å½“æˆ‘ä»¬æƒ³è¦æš‚å­˜æ–‡ä»¶ï¼Œåˆ‡æ¢åˆ†æ”¯åšæŸäº›äº‹çš„æ—¶å€™ï¼Œå¯ä»¥ç”¨ `git stash` è¿™ç§æœºåˆ¶å¸®åŠ©å¼€å‘ã€‚

> æ¨èåœ¨ä½¿ç”¨ stash çš„ç›¸å…³å‘½ä»¤æ—¶ï¼Œæ¯ä¸€æ¬¡æš‚å­˜çš„æ—¶å€™ï¼Œä¸è¦ç›´æ¥ä½¿ç”¨ `git stash` å‘½ä»¤è¿›è¡Œæš‚å­˜ä¸‹æ¥ï¼Œè€Œæ˜¯ä½¿ç”¨ `git stash save "message..."` è¿™ç§æ–¹å¼ï¼Œç»™æœ¬æ¬¡çš„æäº¤åšä¸€ä¸ªä¿¡æ¯çš„è®°å½•ã€‚è¿™æ ·ï¼Œæƒ³åº”ç”¨æ›´æ”¹çš„æ—¶å€™ï¼Œå…ˆé€šè¿‡ `git stash list` æŸ¥çœ‹ä¸€ä¸‹æ‰€æœ‰çš„æš‚å­˜åˆ—è¡¨ã€‚ä¹‹åï¼Œæ¨èä½¿ç”¨ `git stash apply stash@${num}` çš„æ–¹å¼è¿›è¡Œåº”ç”¨å¯¹åº”çš„ stashï¼Œè¿™æ ·ä¸ä¼šæ¸…ç©ºå·²æœ‰çš„ stash çš„åˆ—è¡¨é¡¹ï¼Œå¹¶ä¸”èƒ½åº”ç”¨åˆ°å½“å‰çš„å·¥ä½œåŒºï¼Œä¸éœ€è¦è¿™ä¸ªæš‚å­˜çš„è¯ï¼Œå†æ‰‹åŠ¨æ¸…é™¤å°±å¯ä»¥äº†ã€‚

### é…ç½® git alias æå‡å·¥ä½œæ•ˆç‡

å®ƒçš„åŸºæœ¬ç”¨æ³•æ˜¯ `git config --global alias.<ç®€åŒ–çš„å­—ç¬¦> åŸå§‹å‘½ä»¤`

```sh
git config --global alias.co checkout
git config --global alias.ci commit
git config --global alias.br branch

# git config --global --unset alias.ci å–æ¶ˆåˆ«å
```

![](https://raw.githubusercontent.com/chuenwei0129/my-picgo-repo/master/terminal/SCR-20220403-7do.png)

è¿™äº›å‘½ä»¤å…¶å®æ˜¯æ›´æ–°ä½ å…¨å±€çš„ `.gitconfig` æ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶ç”¨æ¥ä¿å­˜å…¨å±€çš„ git é…ç½®ï¼Œä½ å¯ä»¥ç›´æ¥ `code ~/.gitconfig` æ‰‹åŠ¨æ·»åŠ 

```sh
[alias]
st = status -sb
co = checkout
br = branch
mg = merge
cm = commit -m
ds = diff --staged
dt = difftool
mt = mergetool
last = log -1 HEAD
latest = for-each-ref --sort=-committerdate --format=\"%(committername)@%(refname:short) [%(committerdate:short)] %(contents)\"
ls = log --pretty=format:\"%C(yellow)%h %C(blue)%ad %C(red)%d %C(reset)%s %C(green)[%cn]\" --decorate --date=short
hist = log --pretty=format:\"%C(yellow)%h %C(red)%d %C(reset)%s %C(green)[%an] %C(blue)%ad\" --topo-order --graph --date=short
type = cat-file -t
dump = cat-file -p
lg = log --color --graph --pretty=format:'%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)<%an>%Creset' --abbrev-commit
```

## [å‚è€ƒèµ„æ–™](#ç›®å½•)

[git å·¥ä½œåŸç†ä¸æ’¤é”€æ“ä½œå›¾è§£](https://www.waynerv.com/posts/git-undo-intro/)

[ä¸ºä»€ä¹ˆè¦å…ˆ git add æ‰èƒ½ git commit ï¼Ÿ](https://www.zhihu.com/question/19946553)

[æˆ‘åœ¨å·¥ä½œä¸­æ˜¯å¦‚ä½•ä½¿ç”¨ Git çš„](https://juejin.cn/post/6974184935804534815)

[é«˜é¢‘ Git é¢è¯•é¢˜](https://zhuanlan.zhihu.com/p/101954895)

[Git refusing to merge unrelated histories on rebase](https://stackoverflow.com/questions/37937984/git-refusing-to-merge-unrelated-histories-on-rebase)

[ä¸å»ºè®®åœ¨æ²¡æœ‰ä¸ºåç¦»åˆ†æ”¯æŒ‡å®šåˆå¹¶ç­–ç•¥æ—¶æ‰§è¡Œpull æ“ä½œ](https://blog.csdn.net/wq6ylg08/article/details/114106272)
